---
title: 'Getting Started: Hello Kiara'
---
<h2>Digital History: The Story So Far</h2>

As the field of Digital History continues to grow, so too does the number of tools, software, and coding packages built to support and advance digital history in practice. The range of this is at times staggering: from applications suitable for the most novice of digital historians, to coding guides and tools for those working to more nuanced and specific end-goals, researchers have an ability to engage with their materials in digital, quantitative ways on a never before seen level. Often we focus primarily on the new *findings* that come of out this new way of approaching research - but what about the ways we get to those findings?

Regardless of the type of digital analysis being performed or even the software being used, the process is normally the same: input some data, click some buttons or run some code (perhaps a couple of times over to edit the code and adjust the outcomes), and get your end result.

You've got an outcome - but do you know how you've got from a to b? It's likely that variables have been written over several times along the way, and the data has changed from one type to another, been filtered or added to, and decision after decision has been made without necessarily knowing it. Each little adjustment or re-run of the code has contributed to the research process and is critical to the end output or findings.

But how do we keep track?

This new tool incorporates a number of different digital research approaches, but most importantly documents and encourages users to critically reflect on the process and use of DH tools. In doing so, the software opens up the black box of digital research, moving away from button-clicking software and making digital research more transparent and open to commentary, replicability, and criticism. It not only makes the research process itself more open, allowing users to visualise and examine the individual steps from start to finish, but also allows them to track changes to the data itself, something that is either imperceptible or, perhaps more importantly, *forgotten about* in traditional digital history methods and tools. *kiara* therefore acts as a 'wrapper' to this digital reserach process, tracking and documenting the steps and changes to the data, producing a veritable map of the journey that can be reflected upon and shared.

This tutorial will walk you through installation of *kiara* in Jupyter Notebooks, and some basic but essential functions that can be built on in further notebooks. At the end, it will showcase the **data lineage**, having tracked the research process and changes to the data from start to finish.

This tutorial requires you to know **python** and **SQL**.

Before running this notebook, you need to install Kiara and its dependencies in a virtual environment (such as Conda) by running the following command in your terminal:

```
pip install git+https://github.com/DHARPA-Project/kiara_plugin.dh_tagung_2023
```

<h2>Running <i>kiara</i></h2>

In order to use *kiara*, we need to create a `KiaraAPI` instance. An API allows us to control and interact with *kiara* and its functions. In *kiara* this also allows us to get more information about what can be done (and what is happening) to our data as we go. For more on what can be done with the API, see the *kiara* API documentation <a href = "https://dharpa.org/kiara/latest/reference/kiara/interfaces/python_api/**init**/#kiara.interfaces.python_api.KiaraAPI">here</a>.

```
from kiara.api import KiaraAPI

kiara = KiaraAPI.instance()
```

Now we have an API in place, we can get more information about what we can do in *kiara*. Let's start by asking *kiara* to list all the operations that are included with the plugins we just installed.

```
kiara.list_operation_ids()
```

```
['assemble.network_data.from.files',
 'assemble.network_data.from.tables',
 'compute.modularity_group',
 'create.betweenness_rank_list',
 'create.closeness_rank_list',
 'create.cut_point_list',
 'create.database.from.file',
 'create.database.from.file_bundle',
 'create.database.from.table',
 'create.degree_rank_list',
 'create.eigenvector_rank_list',
 'create.network_data.from.file',
 'create.table.from.file',
 'create.table.from.file_bundle',
 'date.check_range',
 'date.extract_from_string',
 'download.file',
 'download.file_bundle',
 'export.file.as.file',
 'export.network_data.as.csv_files',
 'export.network_data.as.graphml_file',
 'export.network_data.as.sql_dump',
 'export.network_data.as.sqlite_db',
 'export.table.as.csv_file',
 'extract.date_array.from.table',
 'file_bundle.pick.file',
 'file_bundle.pick.sub_folder',
 'import.database.from.local_file_path',
 'import.file',
 'import.file_bundle',
 'import.local.file',
 'import.local.file_bundle',
 'import.network_data.from.local_file_paths',
 'import.table.from.local_file_path',
 'import.table.from.local_folder_path',
 'list.contains',
 'logic.and',
 'logic.nand',
 'logic.nor',
 'logic.not',
 'logic.or',
 'logic.xor',
 'network_data.extract_largest_component',
 'onboard.gml_file',
 'onboard.zenodo_record',
 'parse.date_array',
 'query.database',
 'query.table',
 'string_filter.tokens',
 'table.pick.column',
 'table_filter.drop_columns',
 'table_filter.select_columns',
 'table_filter.select_rows']
```

Great, now we know the different kind of operations we can use with *kiara*. Let's start by introducing some files to our notebook, using the `download.file` function.<br/>\
First we want to find out what this operation does, and just as importantly, what inputs it needs to work.

```
kiara.retrieve_operation_info('download.file')
```

So from this, we know that `download.file` will download a single file from a remote location for us to use in *kiara*. <br/>\
We need to give the function a **url** and, if we want, a **file name**. These are the <span style="color:green">**inputs**</span>. <br/>\
In return, we will get the **file** and **metadata** about the file as our <span style="color:red">**outputs**</span>.

Let's give this a go using some *kiara* sample data.

First we define our <span style="color:green">inputs</span>, then use `kiara.run_job` with our chosen operation, `download.file`, and save this as our <span style="color:red">outputs</span>.

```
inputs = {
        "url": "https://raw.githubusercontent.com/DHARPA-Project/kiara.examples/main/examples/data/network_analysis/journals/JournalNodes1902.csv",
        "file_name": "JournalNodes1902.csv"
}

outputs = kiara.run_job('download.file', inputs=inputs)
```

Let's print out our <span style="color:red">outputs</span> and see what that looks like.

```
outputs
```

Great! We've successfully downloaded the file, and we can see there's lots of information here.

At the moment, we're most interested in the **file** output. This contains the actual *contents* of the file that we have just downloaded.

Let's separate this out and store it in a separate variable for us to use.

```
downloaded_file = outputs['file']
```

What next? We could transform the downloaded file contents into a different format. <br/>\
Let's use the operation list earlier, and look for something that allows us to create something out of our new file.

```
kiara.list_operation_ids('create')
```

```
['create.betweenness_rank_list',
 'create.closeness_rank_list',
 'create.cut_point_list',
 'create.database.from.file',
 'create.database.from.file_bundle',
 'create.database.from.table',
 'create.degree_rank_list',
 'create.eigenvector_rank_list',
 'create.network_data.from.file',
 'create.table.from.file',
 'create.table.from.file_bundle']
```

Our file was orginally in a CSV format, so let's make a table using `create.table.from.file`.

Just like when we used `download.file`, we can double check what this does, and what <span style="color:green">inputs</span> and <span style="color:red">outputs</span> this involves.

This time, we're also going to use a variable to store the operation in - this is especially handy if the operation has a long name, or if you want to use the same operation more than once without retyping it.

```
op_id = 'create.table.from.file'

kiara.retrieve_operation_info(op_id)
```

Great, we have all the information we need now.

Let's go again.

First we define our <span style="color:green">inputs</span>, that is the downloaded file we saved earlier as well as telling kiara that the first row should be read as a header.

Then use `kiara.run_job` with our chosen operation, this time stored as `op_id`.

Once this is saved as our <span style="color:red">outputs</span>, we can print it out.

```
inputs = {
    "file": downloaded_file,
    "first_row_is_header": True
}

outputs = kiara.run_job(op_id, inputs=inputs)

outputs
```

This has done exactly what we wanted, and shown the contents from the downloaded file as a table. But we are also interested in some general (mostly internal) information and metadata, this time for the new table we have just created, rather than the original file itself.

Let's have a look.

```
outputs_table = outputs['table']

outputs_table
```

So now we have downloaded our file and converted it into a table, we want to actually explore it.

To do this, we can query the table using **SQL** and some functions already included in *kiara*.

Let's take another look at that operation list, this time looking for functions that let us 'query'.

```
kiara.list_operation_ids('query')
```

```
['query.database', 'query.table']
```

Well, we already know our file has been converted into a table, so let's have a look at `query.table`.

```
kiara.retrieve_operation_info('query.table')
```

So from this information, we only need to provide the **table** itself, and our **query**.

Let's work out how many of these journals were published in Berlin.

```
inputs = {
    "table": outputs_table,
    "query": "SELECT * from data where City like 'Berlin'"
}

outputs = kiara.run_job('query.table', inputs=inputs)

outputs
```

The function has returned the table with just the results we were looking for from the SQL query.

Let's narrow this further, and find all the journals that are just about general medicine and published in Berlin.

We can re-use the `query.table` function and the table we've just made, stored in `outputs['query_result']`

```
inputs = {
    "table" : outputs['query_result'],
    "query" : "SELECT * from data where JournalType like 'general medicine'"
}

outputs = kiara.run_job('query.table', inputs=inputs)

outputs
```

We've quite a few changes to this table, so let's double check the information about this new table we've created with our queries.

```
query_output = outputs['query_result']

query_output
```

Looks good!

We might have changed things around, but we can still get lots of information about all our data.

More importantly, *kiara* is able to trace all of these changes, tracking the inputs and outputs and giving them all different identifiers, so you know exactly what has happened to your data.\
<br/>First lets have a look at our basic lineage function - this gets us the 'backstage' of what has been going on, showing the inputs for each of the functions that we have run, and where they might feed into one another. In each case, *kiara* has assigned the inputs a unique identifier. Check it out!

```
query_output.lineage
```

We can also visualise this, allowing us to view the different functions and their inputs and outputs as a series of steps or 'workflow' as we've been talking about.

```
from kiara_plugin.dh_tagung_2023.utils import augment_lineage_data
```

```
augmented_nodes = augment_lineage_data(query_output,kiara)
```

```
from observable_jupyter import embed
```

```
embed('@dharpa-project/kiara-data-lineage', cells=['displayViz', 'style'], inputs={'dataset':augmented_nodes})
```

```
<iframe id="observable-embed-div-13255868146737226" sandbox="allow-scripts" style="overflow: auto; min-width: 100%; width: 0px;" frameBorder="0"></iframe>
```

function getFrameByEvent(event) {\
return [...document.getElementsByTagName("iframe")].filter(iframe => {\
return iframe.contentWindow === event.source;\
})[0];\
}

// Each embed gets its own event listener.\
function listenToSize(iframe) {\
function onMessage(msg) {\
if (!document.body.contains(iframe)) {\
// iframe is gone\
removeEventListener("message", onMessage);\
}\
const senderIframe = getFrameByEvent(msg);\
if (msg.data.type === "iframeSize" && senderIframe === iframe) {\
iframe.height = msg.data.height;\
}\
}

```
window.addEventListener("message", onMessage);
```

}

exports.listenToSize = listenToSize;

return exports;

}({}));

function dispatch(node, type, detail) {\
detail = detail || {};\
var document = node.ownerDocument, event = document.defaultView.CustomEvent;\
if (typeof event === "function") {\
event = new event(type, {detail: detail});\
} else {\
event = document.createEvent("Event");\
event.initEvent(type, false, false);\
event.detail = detail;\
}\
node.dispatchEvent(event);\
}

// TODO [https://twitter.com/mbostock/status/702737065121742848](https://twitter.com/mbostock/status/702737065121742848)\
function isarray(value) {\
return Array.isArray(value)\
|| value instanceof Int8Array\
|| value instanceof Int16Array\
|| value instanceof Int32Array\
|| value instanceof Uint8Array\
|| value instanceof Uint8ClampedArray\
|| value instanceof Uint16Array\
|| value instanceof Uint32Array\
|| value instanceof Float32Array\
|| value instanceof Float64Array;\
}

// Non-integer keys in arrays, e.g. [1, 2, 0.5: "value"].\
function isindex(key) {\
return key === (key | 0) + "";\
}

function inspectName(name) {\
const n = document.createElement("span");\
n.className = "observablehq--cellname";\
n.textContent = `${name} =`;\
return n;\
}

const symbolToString = Symbol.prototype.toString;

// Symbols do not coerce to strings; they must be explicitly converted.\
function formatSymbol(symbol) {\
return symbolToString.call(symbol);\
}

const {getOwnPropertySymbols, prototype: {hasOwnProperty}} = Object;\
const {toStringTag} = Symbol;

const FORBIDDEN = {};

const symbolsof = getOwnPropertySymbols;

function isown(object, key) {\
return hasOwnProperty.call(object, key);\
}

function tagof(object) {\
return object[toStringTag]\
|| (object.constructor && object.constructor.name)\
|| "Object";\
}

function valueof(object, key) {\
try {\
const value = object[key];\
if (value) value.constructor; // Test for SecurityError.\
return value;\
} catch (ignore) {\
return FORBIDDEN;\
}\
}

const SYMBOLS = [\
{ symbol: "@@**IMMUTABLE\_INDEXED**@@", name: "Indexed", modifier: true },\
{ symbol: "@@**IMMUTABLE\_KEYED**@@", name: "Keyed", modifier: true },\
{ symbol: "@@**IMMUTABLE\_LIST**@@", name: "List", arrayish: true },\
{ symbol: "@@**IMMUTABLE\_MAP**@@", name: "Map" },\
{\
symbol: "@@**IMMUTABLE\_ORDERED**@@",\
name: "Ordered",\
modifier: true,\
prefix: true\
},\
{ symbol: "@@**IMMUTABLE\_RECORD**@@", name: "Record" },\
{\
symbol: "@@**IMMUTABLE\_SET**@@",\
name: "Set",\
arrayish: true,\
setish: true\
},\
{ symbol: "@@**IMMUTABLE\_STACK**@@", name: "Stack", arrayish: true }\
];

function immutableName(obj) {\
try {\
let symbols = SYMBOLS.filter(({ symbol }) => obj[symbol] === true);\
if (!symbols.length) return;

```
  const name = symbols.find(s => !s.modifier);
  const prefix =
    name.name === "Map" && symbols.find(s => s.modifier && s.prefix);

  const arrayish = symbols.some(s => s.arrayish);
  const setish = symbols.some(s => s.setish);

  return {
    name: \`\${prefix ? prefix.name : ""}\${name.name}\`,
    symbols,
    arrayish: arrayish && !setish,
    setish
  };
} catch (e) {
  return null;
}
```

}

const {getPrototypeOf, getOwnPropertyDescriptors} = Object;\
const objectPrototype = getPrototypeOf({});

function inspectExpanded(object, _, name, proto) {\
let arrayish = isarray(object);\
let tag, fields, next, n;

```
if (object instanceof Map) {
  if (object instanceof object.constructor) {
    tag = \`Map(\${object.size})\`;
    fields = iterateMap;
  } else { // avoid incompatible receiver error for prototype
    tag = "Map()";
    fields = iterateObject;
  }
} else if (object instanceof Set) {
  if (object instanceof object.constructor) {
    tag = \`Set(\${object.size})\`;
    fields = iterateSet;
  } else { // avoid incompatible receiver error for prototype
    tag = "Set()";
    fields = iterateObject;
  }
} else if (arrayish) {
  tag = \`\${object.constructor.name}(\${object.length})\`;
  fields = iterateArray;
} else if ((n = immutableName(object))) {
  tag = \`Immutable.\${n.name}\${n.name === "Record" ? "" : \`(\${object.size})\`}\`;
  arrayish = n.arrayish;
  fields = n.arrayish
    ? iterateImArray
    : n.setish
    ? iterateImSet
    : iterateImObject;
} else if (proto) {
  tag = tagof(object);
  fields = iterateProto;
} else {
  tag = tagof(object);
  fields = iterateObject;
}

const span = document.createElement("span");
span.className = "observablehq--expanded";
if (name) {
  span.appendChild(inspectName(name));
}
const a = span.appendChild(document.createElement("a"));
a.innerHTML = \`<svg width=8 height=8 class='observablehq--caret'>
<path d='M4 7L0 1h8z' fill='currentColor' />
```

</svg>`;\ a.appendChild(document.createTextNode(`${tag}${arrayish ? " [" : " {"}`));\
a.addEventListener("mouseup", function(event) {\
event.stopPropagation();\
replace(span, inspectCollapsed(object, null, name, proto));\
});

```
fields = fields(object);
for (let i = 0; !(next = fields.next()).done && i < 20; ++i) {
  span.appendChild(next.value);
}

if (!next.done) {
  const a = span.appendChild(document.createElement("a"));
  a.className = "observablehq--field";
  a.style.display = "block";
  a.appendChild(document.createTextNode(\`  … more\`));
  a.addEventListener("mouseup", function(event) {
    event.stopPropagation();
    span.insertBefore(next.value, span.lastChild.previousSibling);
    for (let i = 0; !(next = fields.next()).done && i < 19; ++i) {
      span.insertBefore(next.value, span.lastChild.previousSibling);
    }
    if (next.done) span.removeChild(span.lastChild.previousSibling);
    dispatch(span, "load");
  });
}

span.appendChild(document.createTextNode(arrayish ? "]" : "}"));

return span;
```

}

function* iterateMap(map) {\
for (const [key, value] of map) {\
yield formatMapField(key, value);\
}\
yield* iterateObject(map);\
}

function* iterateSet(set) {\
for (const value of set) {\
yield formatSetField(value);\
}\
yield* iterateObject(set);\
}

function* iterateImSet(set) {\
for (const value of set) {\
yield formatSetField(value);\
}\
}

function* iterateArray(array) {\
for (let i = 0, n = array.length; i < n; ++i) {\
if (i in array) {\
yield formatField(i, valueof(array, i), "observablehq--index");\
}\
}\
for (const key in array) {\
if (!isindex(key) && isown(array, key)) {\
yield formatField(key, valueof(array, key), "observablehq--key");\
}\
}\
for (const symbol of symbolsof(array)) {\
yield formatField(\
formatSymbol(symbol),\
valueof(array, symbol),\
"observablehq--symbol"\
);\
}\
}

function* iterateImArray(array) {\
let i1 = 0;\
for (const n = array.size; i1 < n; ++i1) {\
yield formatField(i1, array.get(i1), true);\
}\
}

function* iterateProto(object) {\
for (const key in getOwnPropertyDescriptors(object)) {\
yield formatField(key, valueof(object, key), "observablehq--key");\
}\
for (const symbol of symbolsof(object)) {\
yield formatField(\
formatSymbol(symbol),\
valueof(object, symbol),\
"observablehq--symbol"\
);\
}

```
const proto = getPrototypeOf(object);
if (proto && proto !== objectPrototype) {
  yield formatPrototype(proto);
}
```

}

function* iterateObject(object) {\
for (const key in object) {\
if (isown(object, key)) {\
yield formatField(key, valueof(object, key), "observablehq--key");\
}\
}\
for (const symbol of symbolsof(object)) {\
yield formatField(\
formatSymbol(symbol),\
valueof(object, symbol),\
"observablehq--symbol"\
);\
}

```
const proto = getPrototypeOf(object);
if (proto && proto !== objectPrototype) {
  yield formatPrototype(proto);
}
```

}

function* iterateImObject(object) {\
for (const [key, value] of object) {\
yield formatField(key, value, "observablehq--key");\
}\
}

function formatPrototype(value) {\
const item = document.createElement("div");\
const span = item.appendChild(document.createElement("span"));\
item.className = "observablehq--field";\
span.className = "observablehq--prototype-key";\
span.textContent = `<prototype>`;\
item.appendChild(document.createTextNode(": "));\
item.appendChild(inspect(value, undefined, undefined, undefined, true));\
return item;\
}

function formatField(key, value, className) {\
const item = document.createElement("div");\
const span = item.appendChild(document.createElement("span"));\
item.className = "observablehq--field";\
span.className = className;\
span.textContent = `${key}`;\
item.appendChild(document.createTextNode(": "));\
item.appendChild(inspect(value));\
return item;\
}

function formatMapField(key, value) {\
const item = document.createElement("div");\
item.className = "observablehq--field";\
item.appendChild(document.createTextNode("  "));\
item.appendChild(inspect(key));\
item.appendChild(document.createTextNode(" => "));\
item.appendChild(inspect(value));\
return item;\
}

function formatSetField(value) {\
const item = document.createElement("div");\
item.className = "observablehq--field";\
item.appendChild(document.createTextNode("  "));\
item.appendChild(inspect(value));\
return item;\
}

function hasSelection(elem) {\
const sel = window.getSelection();\
return (\
sel.type === "Range" &&\
(sel.containsNode(elem, true) ||\
sel.anchorNode.isSelfOrDescendant(elem) ||\
sel.focusNode.isSelfOrDescendant(elem))\
);\
}

function inspectCollapsed(object, shallow, name, proto) {\
let arrayish = isarray(object);\
let tag, fields, next, n;

```
if (object instanceof Map) {
  if (object instanceof object.constructor) {
    tag = \`Map(\${object.size})\`;
    fields = iterateMap\$1;
  } else { // avoid incompatible receiver error for prototype
    tag = "Map()";
    fields = iterateObject\$1;
  }
} else if (object instanceof Set) {
  if (object instanceof object.constructor) {
    tag = \`Set(\${object.size})\`;
    fields = iterateSet\$1;
  } else { // avoid incompatible receiver error for prototype
    tag = "Set()";
    fields = iterateObject\$1;
  }
} else if (arrayish) {
  tag = \`\${object.constructor.name}(\${object.length})\`;
  fields = iterateArray\$1;
} else if ((n = immutableName(object))) {
  tag = \`Immutable.\${n.name}\${n.name === 'Record' ? '' : \`(\${object.size})\`}\`;
  arrayish = n.arrayish;
  fields = n.arrayish ? iterateImArray\$1 : n.setish ? iterateImSet\$1 : iterateImObject\$1;
} else {
  tag = tagof(object);
  fields = iterateObject\$1;
}

if (shallow) {
  const span = document.createElement("span");
  span.className = "observablehq--shallow";
  if (name) {
    span.appendChild(inspectName(name));
  }
  span.appendChild(document.createTextNode(tag));
  span.addEventListener("mouseup", function(event) {
    if (hasSelection(span)) return;
    event.stopPropagation();
    replace(span, inspectCollapsed(object));
  });
  return span;
}

const span = document.createElement("span");
span.className = "observablehq--collapsed";
if (name) {
  span.appendChild(inspectName(name));
}
const a = span.appendChild(document.createElement("a"));
a.innerHTML = \`<svg width=8 height=8 class='observablehq--caret'>
<path d='M7 4L1 8V0z' fill='currentColor' />
```

</svg>`;\ a.appendChild(document.createTextNode(`${tag}${arrayish ? " [" : " {"}`));\
span.addEventListener("mouseup", function(event) {\
if (hasSelection(span)) return;\
event.stopPropagation();\
replace(span, inspectExpanded(object, null, name, proto));\
}, true);

```
fields = fields(object);
for (let i = 0; !(next = fields.next()).done && i < 20; ++i) {
  if (i > 0) span.appendChild(document.createTextNode(", "));
  span.appendChild(next.value);
}

if (!next.done) span.appendChild(document.createTextNode(", …"));
span.appendChild(document.createTextNode(arrayish ? "]" : "}"));

return span;
```

}

function* iterateMap$1(map) {\
for (const [key, value] of map) {\
yield formatMapField$1(key, value);\
}\
yield* iterateObject$1(map);\
}

function* iterateSet$1(set) {\
for (const value of set) {\
yield inspect(value, true);\
}\
yield* iterateObject$1(set);\
}

function* iterateImSet$1(set) {\
for (const value of set) {\
yield inspect(value, true);\
}\
}

function* iterateImArray$1(array) {\
let i0 = -1, i1 = 0;\
for (const n = array.size; i1 < n; ++i1) {\
if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\
yield inspect(array.get(i1), true);\
i0 = i1;\
}\
if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\
}

function* iterateArray$1(array) {\
let i0 = -1, i1 = 0;\
for (const n = array.length; i1 < n; ++i1) {\
if (i1 in array) {\
if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\
yield inspect(valueof(array, i1), true);\
i0 = i1;\
}\
}\
if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\
for (const key in array) {\
if (!isindex(key) && isown(array, key)) {\
yield formatField$1(key, valueof(array, key), "observablehq--key");\
}\
}\
for (const symbol of symbolsof(array)) {\
yield formatField$1(formatSymbol(symbol), valueof(array, symbol), "observablehq--symbol");\
}\
}

function* iterateObject$1(object) {\
for (const key in object) {\
if (isown(object, key)) {\
yield formatField$1(key, valueof(object, key), "observablehq--key");\
}\
}\
for (const symbol of symbolsof(object)) {\
yield formatField$1(formatSymbol(symbol), valueof(object, symbol), "observablehq--symbol");\
}\
}

function* iterateImObject$1(object) {\
for (const [key, value] of object) {\
yield formatField$1(key, value, "observablehq--key");\
}\
}

function formatEmpty(e) {\
const span = document.createElement("span");\
span.className = "observablehq--empty";\
span.textContent = e === 1 ? "empty" : `empty × ${e}`;\
return span;\
}

function formatField$1(key, value, className) {\
const fragment = document.createDocumentFragment();\
const span = fragment.appendChild(document.createElement("span"));\
span.className = className;\
span.textContent = key;\
fragment.appendChild(document.createTextNode(": "));\
fragment.appendChild(inspect(value, true));\
return fragment;\
}

function formatMapField$1(key, value) {\
const fragment = document.createDocumentFragment();\
fragment.appendChild(inspect(key, true));\
fragment.appendChild(document.createTextNode(" => "));\
fragment.appendChild(inspect(value, true));\
return fragment;\
}

function format(date, fallback) {\
if (!(date instanceof Date)) date = new Date(+date);\
if (isNaN(date)) return typeof fallback === "function" ? fallback(date) : fallback;\
const hours = date.getUTCHours();\
const minutes = date.getUTCMinutes();\
const seconds = date.getUTCSeconds();\
const milliseconds = date.getUTCMilliseconds();\
return `${formatYear(date.getUTCFullYear())}-${pad(date.getUTCMonth() + 1, 2)}-${pad(date.getUTCDate(), 2)}${\ hours || minutes || seconds || milliseconds ?`T${pad(hours, 2)}:${pad(minutes, 2)}${\
seconds || milliseconds ? `:${pad(seconds, 2)}${\ milliseconds ?`.${pad(milliseconds, 3)}`: ``\ }` : `\ }Z` :`\ }`;\
}

function formatYear(year) {\
return year < 0 ? `-${pad(-year, 6)}`\
: year > 9999 ? `+${pad(year, 6)}`\
: pad(year, 4);\
}

function pad(value, width) {\
return `${value}`.padStart(width, "0");\
}

function formatDate(date) {\
return format(date, "Invalid Date");\
}

var errorToString = Error.prototype.toString;

function formatError(value) {\
return value.stack || errorToString.call(value);\
}

var regExpToString = RegExp.prototype.toString;

function formatRegExp(value) {\
return regExpToString.call(value);\
}

/* eslint-disable no-control-regex */\
const NEWLINE_LIMIT = 20;

function formatString(string, shallow, expanded, name) {\
if (shallow === false) {\
// String has fewer escapes displayed with double quotes\
if (count(string, /["\n]/g) <= count(string, /`|\${/g)) {\ const span = document.createElement("span");\ if (name) span.appendChild(inspectName(name));\ const textValue = span.appendChild(document.createElement("span"));\ textValue.className = "observablehq--string";\ textValue.textContent = JSON.stringify(string);\ return span;\ }\ const lines = string.split("\n");\ if (lines.length > NEWLINE_LIMIT && !expanded) {\ const div = document.createElement("div");\ if (name) div.appendChild(inspectName(name));\ const textValue = div.appendChild(document.createElement("span"));\ textValue.className = "observablehq--string";\ textValue.textContent = "`" + templatify(lines.slice(0, NEWLINE_LIMIT).join("\n"));\
const splitter = div.appendChild(document.createElement("span"));\
const truncatedCount = lines.length - NEWLINE_LIMIT;\
splitter.textContent = `Show ${truncatedCount} truncated line${truncatedCount > 1 ? "s": ""}`; splitter.className = "observablehq--string-expand";\
splitter.addEventListener("mouseup", function (event) {\
event.stopPropagation();\
replace(div, inspect(string, shallow, true, name));\
});\
return div;\
}\
const span = document.createElement("span");\
if (name) span.appendChild(inspectName(name));\
const textValue = span.appendChild(document.createElement("span"));\
textValue.className = `observablehq--string${expanded ? " observablehq--expanded" : ""}`;\
textValue.textContent = "`" + templatify(string) + "`";\
return span;\
}

```
const span = document.createElement("span");
if (name) span.appendChild(inspectName(name));
const textValue = span.appendChild(document.createElement("span"));
textValue.className = "observablehq--string";
textValue.textContent = JSON.stringify(string.length > 100 ?
  \`\${string.slice(0, 50)}…\${string.slice(-49)}\` : string);
return span;
```

}

function templatify(string) {\
return string.replace(/[`\x00-\x09\x0b-\x19]|${/g, templatifyChar);\
}

function templatifyChar(char) {\
var code = char.charCodeAt(0);\
switch (code) {\
case 0x8: return "\b";\
case 0x9: return "\t";\
case 0xb: return "\v";\
case 0xc: return "\f";\
case 0xd: return "\r";\
}\
return code < 0x10 ? "\x0" + code.toString(16)\
: code < 0x20 ? "\x" + code.toString(16)\
: "" + char;\
}

function count(string, re) {\
var n = 0;\
while (re.exec(string)) ++n;\
return n;\
}

var toString = Function.prototype.toString,\
TYPE_ASYNC = {prefix: "async ƒ"},\
TYPE_ASYNC_GENERATOR = {prefix: "async ƒ*"},\
TYPE_CLASS = {prefix: "class"},\
TYPE_FUNCTION = {prefix: "ƒ"},\
TYPE_GENERATOR = {prefix: "ƒ*"};

function inspectFunction(f, name) {\
var type, m, t = toString.call(f);

```
switch (f.constructor && f.constructor.name) {
  case "AsyncFunction": type = TYPE_ASYNC; break;
  case "AsyncGeneratorFunction": type = TYPE_ASYNC_GENERATOR; break;
  case "GeneratorFunction": type = TYPE_GENERATOR; break;
  default: type = /^class\\b/.test(t) ? TYPE_CLASS : TYPE_FUNCTION; break;
}

// A class, possibly named.
// class Name
if (type === TYPE_CLASS) {
  return formatFunction(type, "", name);
}

// An arrow function with a single argument.
// foo =>
// async foo =>
if ((m = /^(?:async\\s*)?(\\w+)\\s*=>/.exec(t))) {
  return formatFunction(type, "(" + m[1] + ")", name);
}

// An arrow function with parenthesized arguments.
// (…)
// async (…)
if ((m = /^(?:async\\s*)?\\(\\s*(\\w+(?:\\s*,\\s*\\w+)*)?\\s*\\)/.exec(t))) {
  return formatFunction(type, m[1] ? "(" + m[1].replace(/\\s*,\\s*/g, ", ") + ")" : "()", name);
}

// A function, possibly: async, generator, anonymous, simply arguments.
// function name(…)
// function* name(…)
// async function name(…)
// async function* name(…)
if ((m = /^(?:async\\s*)?function(?:\\s*\\*)?(?:\\s*\\w+)?\\s*\\(\\s*(\\w+(?:\\s*,\\s*\\w+)*)?\\s*\\)/.exec(t))) {
  return formatFunction(type, m[1] ? "(" + m[1].replace(/\\s*,\\s*/g, ", ") + ")" : "()", name);
}

// Something else, like destructuring, comments or default values.
return formatFunction(type, "(…)", name);
```

}

function formatFunction(type, args, cellname) {\
var span = document.createElement("span");\
span.className = "observablehq--function";\
if (cellname) {\
span.appendChild(inspectName(cellname));\
}\
var spanType = span.appendChild(document.createElement("span"));\
spanType.className = "observablehq--keyword";\
spanType.textContent = type.prefix;\
span.appendChild(document.createTextNode(args));\
return span;\
}

const {prototype: {toString: toString$1}} = Object;

function inspect(value, shallow, expand, name, proto) {\
let type = typeof value;\
switch (type) {\
case "boolean":\
case "undefined": { value += ""; break; }\
case "number": { value = value === 0 && 1 / value < 0 ? "-0" : value + ""; break; }\
case "bigint": { value = value + "n"; break; }\
case "symbol": { value = formatSymbol(value); break; }\
case "function": { return inspectFunction(value, name); }\
case "string": { return formatString(value, shallow, expand, name); }\
default: {\
if (value === null) { type = null, value = "null"; break; }\
if (value instanceof Date) { type = "date", value = formatDate(value); break; }\
if (value === FORBIDDEN) { type = "forbidden", value = "[forbidden]"; break; }\
switch (toString$1.call(value)) {\
case "[object RegExp]": { type = "regexp", value = formatRegExp(value); break; }\
case "[object Error]": // [https://github.com/lodash/lodash/blob/master/isError.js#L26](https://github.com/lodash/lodash/blob/master/isError.js#L26)\
case "[object DOMException]": { type = "error", value = formatError(value); break; }\
default: return (expand ? inspectExpanded : inspectCollapsed)(value, shallow, name, proto);\
}\
break;\
}\
}\
const span = document.createElement("span");\
if (name) span.appendChild(inspectName(name));\
const n = span.appendChild(document.createElement("span"));\
n.className = `observablehq--${type}`;\
n.textContent = value;\
return span;\
}

function replace(spanOld, spanNew) {\
if (spanOld.classList.contains("observablehq--inspect")) spanNew.classList.add("observablehq--inspect");\
spanOld.parentNode.replaceChild(spanNew, spanOld);\
dispatch(spanNew, "load");\
}

const LOCATION_MATCH = /\s+(\d+:\d+)$/m;

class Inspector {\
constructor(node) {\
if (!node) throw new Error("invalid node");\
this._node = node;\
node.classList.add("observablehq");\
}\
pending() {\
const {_node} = this;\
_node.classList.remove("observablehq--error");\
_node.classList.add("observablehq--running");\
}\
fulfilled(value, name) {\
const {_node} = this;\
if (!isnode(value) || (value.parentNode && value.parentNode !== _node)) {\
value = inspect(value, false, _node.firstChild // TODO Do this better.\
&& _node.firstChild.classList\
&& _node.firstChild.classList.contains("observablehq--expanded"), name);\
value.classList.add("observablehq--inspect");\
}\
_node.classList.remove("observablehq--running", "observablehq--error");\
if (_node.firstChild !== value) {\
if (_node.firstChild) {\
while (_node.lastChild !== _node.firstChild) _node.removeChild(_node.lastChild);\
_node.replaceChild(value, _node.firstChild);\
} else {\
_node.appendChild(value);\
}\
}\
dispatch(_node, "update");\
}\
rejected(error, name) {\
const {_node} = this;\
_node.classList.remove("observablehq--running");\
_node.classList.add("observablehq--error");\
while (_node.lastChild) _node.removeChild(_node.lastChild);\
var div = document.createElement("div");\
div.className = "observablehq--inspect";\
if (name) div.appendChild(inspectName(name));\
div.appendChild(document.createTextNode((error + "").replace(LOCATION_MATCH, "")));\
_node.appendChild(div);\
dispatch(_node, "error", {error: error});\
}\
}

Inspector.into = function(container) {\
if (typeof container === "string") {\
container = document.querySelector(container);\
if (container == null) throw new Error("container not found");\
}\
return function() {\
return new Inspector(container.appendChild(document.createElement("div")));\
};\
};

// Returns true if the given value is something that should be added to the DOM\
// by the inspector, rather than being inspected. This deliberately excludes\
// DocumentFragment since appending a fragment “dissolves” (mutates) the\
// fragment, and we wish for the inspector to not have side-effects. Also,\
// HTMLElement.prototype is an instanceof Element, but not an element!\
function isnode(value) {\
return (value instanceof Element || value instanceof Text)\
&& (value instanceof value.constructor);\
}

var EOL = {},\
EOF = {},\
QUOTE = 34,\
NEWLINE = 10,\
RETURN = 13;

function objectConverter(columns) {\
return new Function("d", "return {" + columns.map(function(name, i) {\
return JSON.stringify(name) + ": d[" + i + "] || """;\
}).join(",") + "}");\
}

function customConverter(columns, f) {\
var object = objectConverter(columns);\
return function(row, i) {\
return f(object(row), i, columns);\
};\
}

// Compute unique columns in order of discovery.\
function inferColumns(rows) {\
var columnSet = Object.create(null),\
columns = [];

```
rows.forEach(function(row) {
  for (var column in row) {
    if (!(column in columnSet)) {
      columns.push(columnSet[column] = column);
    }
  }
});

return columns;
```

}

function pad$1(value, width) {\
var s = value + "", length = s.length;\
return length < width ? new Array(width - length + 1).join(0) + s : s;\
}

function formatYear$1(year) {\
return year < 0 ? "-" + pad$1(-year, 6)\
: year > 9999 ? "+" + pad$1(year, 6)\
: pad$1(year, 4);\
}

function formatDate$1(date) {\
var hours = date.getUTCHours(),\
minutes = date.getUTCMinutes(),\
seconds = date.getUTCSeconds(),\
milliseconds = date.getUTCMilliseconds();\
return isNaN(date) ? "Invalid Date"\
: formatYear$1(date.getUTCFullYear()) + "-" + pad$1(date.getUTCMonth() + 1, 2) + "-" + pad$1(date.getUTCDate(), 2)\

- (milliseconds ? "T" + pad$1(hours, 2) + ":" + pad$1(minutes, 2) + ":" + pad$1(seconds, 2) + "." + pad$1(milliseconds, 3) + "Z"\
  : seconds ? "T" + pad$1(hours, 2) + ":" + pad$1(minutes, 2) + ":" + pad$1(seconds, 2) + "Z"\
  : minutes || hours ? "T" + pad$1(hours, 2) + ":" + pad$1(minutes, 2) + "Z"\
  : "");\
  }

function dsv(delimiter) {\
var reFormat = new RegExp("["" + delimiter + "\n\r]"),\
DELIMITER = delimiter.charCodeAt(0);

```
function parse(text, f) {
  var convert, columns, rows = parseRows(text, function(row, i) {
    if (convert) return convert(row, i - 1);
    columns = row, convert = f ? customConverter(row, f) : objectConverter(row);
  });
  rows.columns = columns || [];
  return rows;
}

function parseRows(text, f) {
  var rows = [], // output rows
      N = text.length,
      I = 0, // current character index
      n = 0, // current line number
      t, // current token
      eof = N <= 0, // current token followed by EOF?
      eol = false; // current token followed by EOL?

  // Strip the trailing newline.
  if (text.charCodeAt(N - 1) === NEWLINE) --N;
  if (text.charCodeAt(N - 1) === RETURN) --N;

  function token() {
    if (eof) return EOF;
    if (eol) return eol = false, EOL;

    // Unescape quotes.
    var i, j = I, c;
    if (text.charCodeAt(j) === QUOTE) {
      while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);
      if ((i = I) >= N) eof = true;
      else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;
      else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }
      return text.slice(j + 1, i - 1).replace(/""/g, "\\"");
    }

    // Find next delimiter or newline.
    while (I < N) {
      if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;
      else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }
      else if (c !== DELIMITER) continue;
      return text.slice(j, i);
    }

    // Return last token before EOF.
    return eof = true, text.slice(j, N);
  }

  while ((t = token()) !== EOF) {
    var row = [];
    while (t !== EOL && t !== EOF) row.push(t), t = token();
    if (f && (row = f(row, n++)) == null) continue;
    rows.push(row);
  }

  return rows;
}

function preformatBody(rows, columns) {
  return rows.map(function(row) {
    return columns.map(function(column) {
      return formatValue(row[column]);
    }).join(delimiter);
  });
}

function format(rows, columns) {
  if (columns == null) columns = inferColumns(rows);
  return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join("\\n");
}

function formatBody(rows, columns) {
  if (columns == null) columns = inferColumns(rows);
  return preformatBody(rows, columns).join("\\n");
}

function formatRows(rows) {
  return rows.map(formatRow).join("\\n");
}

function formatRow(row) {
  return row.map(formatValue).join(delimiter);
}

function formatValue(value) {
  return value == null ? ""
      : value instanceof Date ? formatDate\$1(value)
      : reFormat.test(value += "") ? "\\"" + value.replace(/"/g, "\\"\\"") + "\\""
      : value;
}

return {
  parse: parse,
  parseRows: parseRows,
  format: format,
  formatBody: formatBody,
  formatRows: formatRows,
  formatRow: formatRow,
  formatValue: formatValue
};
```

}

var csv = dsv(",");

var csvParse = csv.parse;\
var csvParseRows = csv.parseRows;

var tsv = dsv("\t");

var tsvParse = tsv.parse;\
var tsvParseRows = tsv.parseRows;

function autoType(object) {\
for (var key in object) {\
var value = object[key].trim(), number, m;\
if (!value) value = null;\
else if (value === "true") value = true;\
else if (value === "false") value = false;\
else if (value === "NaN") value = NaN;\
else if (!isNaN(number = +value)) value = number;\
else if (m = value.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)) {\
if (fixtz && !!m[4] && !m[7]) value = value.replace(/-/g, "/").replace(/T/, " ");\
value = new Date(value);\
}\
else continue;\
object[key] = value;\
}\
return object;\
}

// [https://github.com/d3/d3-dsv/issues/45](https://github.com/d3/d3-dsv/issues/45)\
const fixtz = new Date("2019-01-01T00:00").getHours() || new Date("2019-07-01T00:00").getHours();

const metas = new Map;\
const queue = [];\
const map = queue.map;\
const some = queue.some;\
const hasOwnProperty$1 = queue.hasOwnProperty;\
const origin = "[https://cdn.jsdelivr.net/npm/](https://cdn.jsdelivr.net/npm/)";\
const identifierRe = /^((?:@[^/@]+/)?[^/@]+)(?:@([^/]+))?(?:/(.*))?$/;*\
*const versionRe = /^\d+.\d+.\d+(-[\w-.+]+)?$/;*\
*const extensionRe = /.[^/]*$/;\
const mains = ["unpkg", "jsdelivr", "browser", "main"];

class RequireError extends Error {\
constructor(message) {\
super(message);\
}\
}

RequireError.prototype.name = RequireError.name;

function main(meta) {\
for (const key of mains) {\
const value = meta[key];\
if (typeof value === "string") {\
return extensionRe.test(value) ? value : `${value}.js`;\
}\
}\
}

function parseIdentifier(identifier) {\
const match = identifierRe.exec(identifier);\
return match && {\
name: match[1],\
version: match[2],\
path: match[3]\
};\
}

function resolveMeta(target) {\
const url = `${origin}${target.name}${target.version ?`@${target.version}`: ""}/package.json`;\
let meta = metas.get(url);\
if (!meta) metas.set(url, meta = fetch(url).then(response => {\
if (!response.ok) throw new RequireError("unable to load package.json");\
if (response.redirected && !metas.has(response.url)) metas.set(response.url, meta);\
return response.json();\
}));\
return meta;\
}

async function resolve(name, base) {\
if (name.startsWith(origin)) name = name.substring(origin.length);\
if (/^(\w+:)|///i.test(name)) return name;\
if (/^[.]{0,2}//i.test(name)) return new URL(name, base == null ? location : base).href;\
if (!name.length || /^[\s._]/.test(name) || /\s$/.test(name)) throw new RequireError("illegal name");\
const target = parseIdentifier(name);\
if (!target) return `${origin}${name}`;\
if (!target.version && base != null && base.startsWith(origin)) {\
const meta = await resolveMeta(parseIdentifier(base.substring(origin.length)));\
target.version = meta.dependencies && meta.dependencies[target.name] || meta.peerDependencies && meta.peerDependencies[target.name];\
}\
if (target.path && !extensionRe.test(target.path)) target.path += ".js";\
if (target.path && target.version && versionRe.test(target.version)) return `${origin}${target.name}@${target.version}/${target.path}`;\
const meta = await resolveMeta(target);\
return `${origin}${meta.name}@${meta.version}/${target.path || main(meta) || "index.js"}`;\
}

var require = requireFrom(resolve);

function requireFrom(resolver) {\
const cache = new Map;\
const requireBase = requireRelative(null);

```
function requireAbsolute(url) {
  if (typeof url !== "string") return url;
  let module = cache.get(url);
  if (!module) cache.set(url, module = new Promise((resolve, reject) => {
    const script = document.createElement("script");
    script.onload = () => {
      try { resolve(queue.pop()(requireRelative(url))); }
      catch (error) { reject(new RequireError("invalid module")); }
      script.remove();
    };
    script.onerror = () => {
      reject(new RequireError("unable to load module"));
      script.remove();
    };
    script.async = true;
    script.src = url;
    window.define = define;
    document.head.appendChild(script);
  }));
  return module;
}

function requireRelative(base) {
  return name => Promise.resolve(resolver(name, base)).then(requireAbsolute);
}

function requireAlias(aliases) {
  return requireFrom((name, base) => {
    if (name in aliases) {
      name = aliases[name], base = null;
      if (typeof name !== "string") return name;
    }
    return resolver(name, base);
  });
}

function require(name) {
  return arguments.length > 1
      ? Promise.all(map.call(arguments, requireBase)).then(merge)
      : requireBase(name);
}

require.alias = requireAlias;
require.resolve = resolver;

return require;
```

}

function merge(modules) {\
const o = {};\
for (const m of modules) {\
for (const k in m) {\
if (hasOwnProperty$1.call(m, k)) {\
if (m[k] == null) Object.defineProperty(o, k, {get: getter(m, k)});\
else o[k] = m[k];\
}\
}\
}\
return o;\
}

function getter(object, name) {\
return () => object[name];\
}

function isbuiltin(name) {\
name = name + "";\
return name === "exports" || name === "module";\
}

function define(name, dependencies, factory) {\
const n = arguments.length;\
if (n < 2) factory = name, dependencies = [];\
else if (n < 3) factory = dependencies, dependencies = typeof name === "string" ? [] : name;\
queue.push(some.call(dependencies, isbuiltin) ? require => {\
const exports = {};\
const module = {exports};\
return Promise.all(map.call(dependencies, name => {\
name = name + "";\
return name === "exports" ? exports : name === "module" ? module : require(name);\
})).then(dependencies => {\
factory.apply(null, dependencies);\
return module.exports;\
});\
} : require => {\
return Promise.all(map.call(dependencies, require)).then(dependencies => {\
return typeof factory === "function" ? factory.apply(null, dependencies) : factory;\
});\
});\
}

define.amd = {};

function dependency(name, version, main) {\
return {\
resolve(path = main) {\
return `[https://cdn.jsdelivr.net/npm/\${name}@\${version}/\${path}\`](https://cdn.jsdelivr.net/npm/${name}@${version}/${path}`);\
}\
};\
}

const d3 = dependency("d3", "7.0.4", "dist/d3.min.js");\
const inputs = dependency("@observablehq/inputs", "0.9.7", "dist/inputs.min.js");\
const plot = dependency("@observablehq/plot", "0.2.4", "dist/plot.umd.min.js");\
const graphviz = dependency("@observablehq/graphviz", "0.2.1", "dist/graphviz.min.js");\
const highlight = dependency("@observablehq/highlight.js", "2.0.0", "highlight.min.js");\
const katex = dependency("@observablehq/katex", "0.11.1", "dist/katex.min.js");\
const lodash = dependency("lodash", "4.17.21", "lodash.min.js");\
const htl = dependency("htl", "0.3.1", "dist/htl.min.js");\
const jszip = dependency("jszip", "3.7.1", "dist/jszip.min.js");\
const marked = dependency("marked", "0.3.12", "marked.min.js");\
const sql = dependency("sql.js", "1.6.1", "dist/sql-wasm.js");\
const vega = dependency("vega", "5.21.0", "build/vega.min.js");\
const vegalite = dependency("vega-lite", "5.1.1", "build/vega-lite.min.js");\
const vegaliteApi = dependency("vega-lite-api", "5.0.0", "build/vega-lite-api.min.js");\
const arrow = dependency("apache-arrow", "4.0.1", "Arrow.es2015.min.js");\
const arquero = dependency("arquero", "4.8.7", "dist/arquero.min.js");\
const topojson = dependency("topojson-client", "3.1.0", "dist/topojson-client.min.js");\
const exceljs = dependency("exceljs", "4.3.0", "dist/exceljs.min.js");

async function sqlite(require) {\
const init = await require(sql.resolve());\
return init({locateFile: file => sql.resolve(`dist/${file}`)});\
}

class SQLiteDatabaseClient {\
constructor(db) {\
Object.defineProperties(this, {\
_db: {value: db}\
});\
}\
static async open(source) {\
const [SQL, buffer] = await Promise.all([sqlite(require), Promise.resolve(source).then(load)]);\
return new SQLiteDatabaseClient(new SQL.Database(buffer));\
}\
async query(query, params) {\
return await exec(this._db, query, params);\
}\
async queryRow(query, params) {\
return (await this.query(query, params))[0] || null;\
}\
async explain(query, params) {\
const rows = await this.query(`EXPLAIN QUERY PLAN ${query}`, params);\
return element("pre", {className: "observablehq--inspect"}, [\
text(rows.map(row => row.detail).join("\n"))\
]);\
}\
async describe(object) {\
const rows = await (object === undefined\
? this.query(`SELECT name FROM sqlite_master WHERE type = 'table'`)\
: this.query(`SELECT * FROM pragma_table_info(?)`, [object]));\
if (!rows.length) throw new Error("Not found");\
const {columns} = rows;\
return element("table", {value: rows}, [\
element("thead", [element("tr", columns.map(c => element("th", [text(c)])))]),\
element("tbody", rows.map(r => element("tr", columns.map(c => element("td", [text(r[c])])))))\
]);\
}\
}

function load(source) {\
return typeof source === "string" ? fetch(source).then(load)\
: source instanceof Response || source instanceof Blob ? source.arrayBuffer().then(load)\
: source instanceof ArrayBuffer ? new Uint8Array(source)\
: source;\
}

async function exec(db, query, params) {\
const [result] = await db.exec(query, params);\
if (!result) return [];\
const {columns, values} = result;\
const rows = values.map(row => Object.fromEntries(row.map((value, i) => [columns[i], value])));\
rows.columns = columns;\
return rows;\
}

function element(name, props, children) {\
if (arguments.length === 2) children = props, props = undefined;\
const element = document.createElement(name);\
if (props !== undefined) for (const p in props) element[p] = props[p];\
if (children !== undefined) for (const c of children) element.appendChild(c);\
return element;\
}

function text(value) {\
return document.createTextNode(value);\
}

class Workbook {\
constructor(workbook) {\
Object.defineProperties(this, {\
*: {value: workbook},*\
*sheetNames: {*\
*value: workbook.worksheets.map((s) => s.name),*\
*enumerable: true,*\
*},*\
*});*\
*}*\
*sheet(name, options) {*\
*const sname =*\
*typeof name === "number"*\
*? this.sheetNames[name]*\
*: this.sheetNames.includes((name += ""))*\
*? name*\
*: null;*\
*if (sname == null) throw new Error(**`Sheet not found: ${name}`**);*\
*const sheet = this.*.getWorksheet(sname);\
return extract(sheet, options);\
}\
}

function extract(sheet, {range, headers} = {}) {\
let [[c0, r0], [c1, r1]] = parseRange(range, sheet);\
const headerRow = headers ? sheet.*rows[r0++] : null;*\
*let names = new Set(["#"]);*\
*for (let n = c0; n <= c1; n++) {*\
*const value = headerRow ? valueOf(headerRow.findCell(n + 1)) : null;*\
*let name = (value && value + "") || toColumn(n);*\
*while (names.has(name)) name += "*";\
names.add(name);\
}\
names = new Array(c0).concat(Array.from(names));

```
const output = new Array(r1 - r0 + 1);
for (let r = r0; r <= r1; r++) {
  const row = (output[r - r0] = Object.create(null, {"#": {value: r + 1}}));
  const _row = sheet.getRow(r + 1);
  if (_row.hasValues)
    for (let c = c0; c <= c1; c++) {
      const value = valueOf(_row.findCell(c + 1));
      if (value != null) row[names[c + 1]] = value;
    }
}

output.columns = names.filter(() => true); // Filter sparse columns
return output;
```

}

function valueOf(cell) {\
if (!cell) return;\
const {value} = cell;\
if (value && typeof value === "object" && !(value instanceof Date)) {\
if (value.formula || value.sharedFormula) {\
return value.result && value.result.error ? NaN : value.result;\
}\
if (value.richText) {\
return richText(value);\
}\
if (value.text) {\
let {text} = value;\
if (text.richText) text = richText(text);\
return value.hyperlink && value.hyperlink !== text\
? `${value.hyperlink} ${text}`\
: text;\
}\
return value;\
}\
return value;\
}

function richText(value) {\
return value.richText.map((d) => d.text).join("");\
}

function parseRange(specifier = ":", {columnCount, rowCount}) {\
specifier += "";\
if (!specifier.match(/^[A-Z]*\d*:[A-Z]*\d*$/))\
throw new Error("Malformed range specifier");\
const [[c0 = 0, r0 = 0], [c1 = columnCount - 1, r1 = rowCount - 1]] =\
specifier.split(":").map(fromCellReference);\
return [\
[c0, r0],\
[c1, r1],\
];\
}

// Returns the default column name for a zero-based column index.\
// For example: 0 -> "A", 1 -> "B", 25 -> "Z", 26 -> "AA", 27 -> "AB".\
function toColumn(c) {\
let sc = "";\
c++;\
do {\
sc = String.fromCharCode(64 + (c % 26 || 26)) + sc;\
} while ((c = Math.floor((c - 1) / 26)));\
return sc;\
}

// Returns the zero-based indexes from a cell reference.\
// For example: "A1" -> [0, 0], "B2" -> [1, 1], "AA10" -> [26, 9].\
function fromCellReference(s) {\
const [, sc, sr] = s.match(/^([A-Z]*)(\d*)$/);\
let c = 0;\
if (sc)\
for (let i = 0; i < sc.length; i++)\
c += Math.pow(26, sc.length - i - 1) * (sc.charCodeAt(i) - 64);\
return [c ? c - 1 : undefined, sr ? +sr - 1 : undefined];\
}

async function remote_fetch(file) {\
const response = await fetch(await file.url());\
if (!response.ok) throw new Error(`Unable to load file: ${file.name}`);\
return response;\
}

async function dsv$1(file, delimiter, {array = false, typed = false} = {}) {\
const text = await file.text();\
return (delimiter === "\t"\
? (array ? tsvParseRows : tsvParse)\
: (array ? csvParseRows : csvParse))(text, typed && autoType);\
}

class AbstractFile {\
constructor(name) {\
Object.defineProperty(this, "name", {value: name, enumerable: true});\
}\
async blob() {\
return (await remote_fetch(this)).blob();\
}\
async arrayBuffer() {\
return (await remote_fetch(this)).arrayBuffer();\
}\
async text() {\
return (await remote_fetch(this)).text();\
}\
async json() {\
return (await remote_fetch(this)).json();\
}\
async stream() {\
return (await remote_fetch(this)).body;\
}\
async csv(options) {\
return dsv$1(this, ",", options);\
}\
async tsv(options) {\
return dsv$1(this, "\t", options);\
}\
async image() {\
const url = await this.url();\
return new Promise((resolve, reject) => {\
const i = new Image;\
if (new URL(url, document.baseURI).origin !== new URL(location).origin) {\
i.crossOrigin = "anonymous";\
}\
i.onload = () => resolve(i);\
i.onerror = () => reject(new Error(`Unable to load file: ${this.name}`));\
i.src = url;\
});\
}\
async arrow() {\
const [Arrow, response] = await Promise.all([require(arrow.resolve()), remote_fetch(this)]);\
return Arrow.Table.from(response);\
}\
async sqlite() {\
return SQLiteDatabaseClient.open(remote_fetch(this));\
}\
async zip() {\
const [JSZip, buffer] = await Promise.all([require(jszip.resolve()), this.arrayBuffer()]);\
return new ZipArchive(await JSZip.loadAsync(buffer));\
}\
async xml(mimeType = "application/xml") {\
return (new DOMParser).parseFromString(await this.text(), mimeType);\
}\
async html() {\
return this.xml("text/html");\
}\
async xlsx() {\
const [ExcelJS, buffer] = await Promise.all([require(exceljs.resolve()), this.arrayBuffer()]);\
return new Workbook(await new ExcelJS.Workbook().xlsx.load(buffer));\
}\
}

class FileAttachment extends AbstractFile {\
constructor(url, name) {\
super(name);\
Object.defineProperty(this, "_url", {value: url});\
}\
async url() {\
return (await this._url) + "";\
}\
}

function NoFileAttachments(name) {\
throw new Error(`File not found: ${name}`);\
}

function FileAttachments(resolve) {\
return Object.assign(\
name => {\
const url = resolve(name += ""); // Returns a Promise, string, or null.\
if (url == null) throw new Error(`File not found: ${name}`);\
return new FileAttachment(url, name);\
},\
{prototype: FileAttachment.prototype} // instanceof\
);\
}

class ZipArchive {\
constructor(archive) {\
Object.defineProperty(this, "*", {value: archive});*\
*this.filenames = Object.keys(archive.files).filter(name => !archive.files[name].dir);*\
*}*\
*file(path) {*\
*const object = this.*.file(path += "");\
if (!object || object.dir) throw new Error(`file not found: ${path}`);\
return new ZipArchiveEntry(object);\
}\
}

class ZipArchiveEntry extends AbstractFile {\
constructor(object) {\
super(object.name);\
Object.defineProperty(this, "_", {value: object});\
Object.defineProperty(this, "*url", {writable: true});*\
*}*\
*async url() {*\
*return this.url || (this.url = this.blob().then(URL.createObjectURL));*\
*}*\
*async blob() {*\
*return this..async("blob");*\
*}*\
*async arrayBuffer() {*\
*return this..async("arraybuffer");*\
*}*\
*async text() {*\
*return this.*.async("text");\
}\
async json() {\
return JSON.parse(await this.text());\
}\
}

function canvas(width, height) {\
var canvas = document.createElement("canvas");\
canvas.width = width;\
canvas.height = height;\
return canvas;\
}

function context2d(width, height, dpi) {\
if (dpi == null) dpi = devicePixelRatio;\
var canvas = document.createElement("canvas");\
canvas.width = width * dpi;\
canvas.height = height * dpi;\
canvas.style.width = width + "px";\
var context = canvas.getContext("2d");\
context.scale(dpi, dpi);\
return context;\
}

function download(value, name = "untitled", label = "Save") {\
const a = document.createElement("a");\
const b = a.appendChild(document.createElement("button"));\
b.textContent = label;\
a.download = name;

```
async function reset() {
  await new Promise(requestAnimationFrame);
  URL.revokeObjectURL(a.href);
  a.removeAttribute("href");
  b.textContent = label;
  b.disabled = false;
}

a.onclick = async event => {
  b.disabled = true;
  if (a.href) return reset(); // Already saved.
  b.textContent = "Saving…";
  try {
    const object = await (typeof value === "function" ? value() : value);
    b.textContent = "Download";
    a.href = URL.createObjectURL(object); // eslint-disable-line require-atomic-updates
  } catch (ignore) {
    b.textContent = label;
  }
  if (event.eventPhase) return reset(); // Already downloaded.
  b.disabled = false;
};

return a;
```

}

var namespaces = {\
math: "[http://www.w3.org/1998/Math/MathML](http://www.w3.org/1998/Math/MathML)",\
svg: "[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",\
xhtml: "[http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)",\
xlink: "[http://www.w3.org/1999/xlink](http://www.w3.org/1999/xlink)",\
xml: "[http://www.w3.org/XML/1998/namespace](http://www.w3.org/XML/1998/namespace)",\
xmlns: "[http://www.w3.org/2000/xmlns/](http://www.w3.org/2000/xmlns/)"\
};

function element$1(name, attributes) {\
var prefix = name += "", i = prefix.indexOf(":"), value;\
if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns") name = name.slice(i + 1);\
var element = namespaces.hasOwnProperty(prefix) // eslint-disable-line no-prototype-builtins\
? document.createElementNS(namespaces[prefix], name)\
: document.createElement(name);\
if (attributes) for (var key in attributes) {\
prefix = key, i = prefix.indexOf(":"), value = attributes[key];\
if (i >= 0 && (prefix = key.slice(0, i)) !== "xmlns") key = key.slice(i + 1);\
if (namespaces.hasOwnProperty(prefix)) element.setAttributeNS(namespaces[prefix], key, value); // eslint-disable-line no-prototype-builtins\
else element.setAttribute(key, value);\
}\
return element;\
}

function input(type) {\
var input = document.createElement("input");\
if (type != null) input.type = type;\
return input;\
}

function range(min, max, step) {\
if (arguments.length === 1) max = min, min = null;\
var input = document.createElement("input");\
input.min = min = min == null ? 0 : +min;\
input.max = max = max == null ? 1 : +max;\
input.step = step == null ? "any" : step = +step;\
input.type = "range";\
return input;\
}

function select(values) {\
var select = document.createElement("select");\
Array.prototype.forEach.call(values, function(value) {\
var option = document.createElement("option");\
option.value = option.textContent = value;\
select.appendChild(option);\
});\
return select;\
}

function svg(width, height) {\
var svg = document.createElementNS("[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)", "svg");\
svg.setAttribute("viewBox", [0, 0, width, height]);\
svg.setAttribute("width", width);\
svg.setAttribute("height", height);\
return svg;\
}

function text$1(value) {\
return document.createTextNode(value);\
}

var count$1 = 0;

function uid(name) {\
return new Id("O-" + (name == null ? "" : name + "-") + ++count$1);\
}

function Id(id) {\
this.id = id;\
this.href = new URL(`#${id}`, location) + "";\
}

Id.prototype.toString = function() {\
return "url(" + this.href + ")";\
};

var DOM = {\
canvas: canvas,\
context2d: context2d,\
download: download,\
element: element$1,\
input: input,\
range: range,\
select: select,\
svg: svg,\
text: text$1,\
uid: uid\
};

function buffer(file) {\
return new Promise(function(resolve, reject) {\
var reader = new FileReader;\
reader.onload = function() { resolve(reader.result); };\
reader.onerror = reject;\
reader.readAsArrayBuffer(file);\
});\
}

function text$2(file) {\
return new Promise(function(resolve, reject) {\
var reader = new FileReader;\
reader.onload = function() { resolve(reader.result); };\
reader.onerror = reject;\
reader.readAsText(file);\
});\
}

function url(file) {\
return new Promise(function(resolve, reject) {\
var reader = new FileReader;\
reader.onload = function() { resolve(reader.result); };\
reader.onerror = reject;\
reader.readAsDataURL(file);\
});\
}

var Files = {\
buffer: buffer,\
text: text$2,\
url: url\
};

function that() {\
return this;\
}

function disposable(value, dispose) {\
let done = false;\
if (typeof dispose !== "function") {\
throw new Error("dispose is not a function");\
}\
return {\
[Symbol.iterator]: that,\
next: () => done ? {done: true} : (done = true, {done: false, value}),\
return: () => (done = true, dispose(value), {done: true}),\
throw: () => ({done: done = true})\
};\
}

function* filter(iterator, test) {\
var result, index = -1;\
while (!(result = iterator.next()).done) {\
if (test(result.value, ++index)) {\
yield result.value;\
}\
}\
}

function observe(initialize) {\
let stale = false;\
let value;\
let resolve;\
const dispose = initialize(change);

```
if (dispose != null && typeof dispose !== "function") {
  throw new Error(typeof dispose.then === "function"
      ? "async initializers are not supported"
      : "initializer returned something, but not a dispose function");
}

function change(x) {
  if (resolve) resolve(x), resolve = null;
  else stale = true;
  return value = x;
}

function next() {
  return {done: false, value: stale
      ? (stale = false, Promise.resolve(value))
      : new Promise(_ => (resolve = _))};
}

return {
  [Symbol.iterator]: that,
  throw: () => ({done: true}),
  return: () => (dispose != null && dispose(), {done: true}),
  next
};
```

}

function input$1(input) {\
return observe(function(change) {\
var event = eventof(input), value = valueof$1(input);\
function inputted() { change(valueof$1(input)); }\
input.addEventListener(event, inputted);\
if (value !== undefined) change(value);\
return function() { input.removeEventListener(event, inputted); };\
});\
}

function valueof$1(input) {\
switch (input.type) {\
case "range":\
case "number": return input.valueAsNumber;\
case "date": return input.valueAsDate;\
case "checkbox": return input.checked;\
case "file": return input.multiple ? input.files : input.files[0];\
case "select-multiple": return Array.from(input.selectedOptions, o => o.value);\
default: return input.value;\
}\
}

function eventof(input) {\
switch (input.type) {\
case "button":\
case "submit":\
case "checkbox": return "click";\
case "file": return "change";\
default: return "input";\
}\
}

function* map$1(iterator, transform) {\
var result, index = -1;\
while (!(result = iterator.next()).done) {\
yield transform(result.value, ++index);\
}\
}

function queue$1(initialize) {\
let resolve;\
const queue = [];\
const dispose = initialize(push);

```
if (dispose != null && typeof dispose !== "function") {
  throw new Error(typeof dispose.then === "function"
      ? "async initializers are not supported"
      : "initializer returned something, but not a dispose function");
}

function push(x) {
  queue.push(x);
  if (resolve) resolve(queue.shift()), resolve = null;
  return x;
}

function next() {
  return {done: false, value: queue.length
      ? Promise.resolve(queue.shift())
      : new Promise(_ => (resolve = _))};
}

return {
  [Symbol.iterator]: that,
  throw: () => ({done: true}),
  return: () => (dispose != null && dispose(), {done: true}),
  next
};
```

}

function* range$1(start, stop, step) {\
start = +start;\
stop = +stop;\
step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\
var i = -1, n = Math.max(0, Math.ceil((stop - start) / step)) | 0;\
while (++i < n) {\
yield start + i * step;\
}\
}

function valueAt(iterator, i) {\
if (!isFinite(i = +i) || i < 0 || i !== i | 0) return;\
var result, index = -1;\
while (!(result = iterator.next()).done) {\
if (++index === i) {\
return result.value;\
}\
}\
}

function worker(source) {\
const url = URL.createObjectURL(new Blob([source], {type: "text/javascript"}));\
const worker = new Worker(url);\
return disposable(worker, () => {\
worker.terminate();\
URL.revokeObjectURL(url);\
});\
}

var Generators = {\
disposable: disposable,\
filter: filter,\
input: input$1,\
map: map$1,\
observe: observe,\
queue: queue$1,\
range: range$1,\
valueAt: valueAt,\
worker: worker\
};

function template(render, wrapper) {\
return function(strings) {\
var string = strings[0],\
parts = [], part,\
root = null,\
node, nodes,\
walker,\
i, n, j, m, k = -1;

```
  // Concatenate the text using comments as placeholders.
  for (i = 1, n = arguments.length; i < n; ++i) {
    part = arguments[i];
    if (part instanceof Node) {
      parts[++k] = part;
      string += "<!--o:" + k + "-->";
    } else if (Array.isArray(part)) {
      for (j = 0, m = part.length; j < m; ++j) {
        node = part[j];
        if (node instanceof Node) {
          if (root === null) {
            parts[++k] = root = document.createDocumentFragment();
            string += "<!--o:" + k + "-->";
          }
          root.appendChild(node);
        } else {
          root = null;
          string += node;
        }
      }
      root = null;
    } else {
      string += part;
    }
    string += strings[i];
  }

  // Render the text.
  root = render(string);

  // Walk the rendered content to replace comment placeholders.
  if (++k > 0) {
    nodes = new Array(k);
    walker = document.createTreeWalker(root, NodeFilter.SHOW_COMMENT, null, false);
    while (walker.nextNode()) {
      node = walker.currentNode;
      if (/^o:/.test(node.nodeValue)) {
        nodes[+node.nodeValue.slice(2)] = node;
      }
    }
    for (i = 0; i < k; ++i) {
      if (node = nodes[i]) {
        node.parentNode.replaceChild(parts[i], node);
      }
    }
  }

  // Is the rendered content
  // … a parent of a single child? Detach and return the child.
  // … a document fragment? Replace the fragment with an element.
  // … some other node? Return it.
  return root.childNodes.length === 1 ? root.removeChild(root.firstChild)
      : root.nodeType === 11 ? ((node = wrapper()).appendChild(root), node)
      : root;
};
```

}

var html = template(function(string) {\
var template = document.createElement("template");\
template.innerHTML = string.trim();\
return document.importNode(template.content, true);\
}, function() {\
return document.createElement("span");\
});

function md(require) {\
return require(marked.resolve()).then(function(marked) {\
return template(\
function(string) {\
var root = document.createElement("div");\
root.innerHTML = marked(string, {langPrefix: ""}).trim();\
var code = root.querySelectorAll("pre code[class]");\
if (code.length > 0) {\
require(highlight.resolve()).then(function(hl) {\
code.forEach(function(block) {\
function done() {\
hl.highlightBlock(block);\
block.parentNode.classList.add("observablehq--md-pre");\
}\
if (hl.getLanguage(block.className)) {\
done();\
} else {\
require(highlight.resolve("async-languages/index.js"))\
.then(index => {\
if (index.has(block.className)) {\
return require(highlight.resolve("async-languages/" + index.get(block.className))).then(language => {\
hl.registerLanguage(block.className, language);\
});\
}\
})\
.then(done, done);\
}\
});\
});\
}\
return root;\
},\
function() {\
return document.createElement("div");\
}\
);\
});\
}

function Mutable(value) {\
let change;\
Object.defineProperties(this, {\
generator: {value: observe(_ => void (change = _))},\
value: {get: () => value, set: x => change(value = x)} // eslint-disable-line no-setter-return\
});\
if (value !== undefined) change(value);\
}

function* now() {\
while (true) {\
yield Date.now();\
}\
}

function delay(duration, value) {\
return new Promise(function(resolve) {\
setTimeout(function() {\
resolve(value);\
}, duration);\
});\
}

var timeouts = new Map;

function timeout(now, time) {\
var t = new Promise(function(resolve) {\
timeouts.delete(time);\
var delay = time - now;\
if (!(delay > 0)) throw new Error("invalid time");\
if (delay > 0x7fffffff) throw new Error("too long to wait");\
setTimeout(resolve, delay);\
});\
timeouts.set(time, t);\
return t;\
}

function when(time, value) {\
var now;\
return (now = timeouts.get(time = +time)) ? now.then(() => value)\
: (now = Date.now()) >= time ? Promise.resolve(value)\
: timeout(now, time).then(() => value);\
}

function tick(duration, value) {\
return when(Math.ceil((Date.now() + 1) / duration) * duration, value);\
}

var Promises = {\
delay: delay,\
tick: tick,\
when: when\
};

function resolve$1(name, base) {\
if (/^(\w+:)|///i.test(name)) return name;\
if (/^[.]{0,2}//i.test(name)) return new URL(name, base == null ? location : base).href;\
if (!name.length || /^[\s._]/.test(name) || /\s$/.test(name)) throw new Error("illegal name");\
return "[https://unpkg.com/](https://unpkg.com/)" + name;\
}

function requirer(resolve) {\
return resolve == null ? require : requireFrom(resolve);\
}

var svg$1 = template(function(string) {\
var root = document.createElementNS("[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)", "g");\
root.innerHTML = string.trim();\
return root;\
}, function() {\
return document.createElementNS("[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)", "g");\
});

var raw = String.raw;

function style(href) {\
return new Promise(function(resolve, reject) {\
var link = document.createElement("link");\
link.rel = "stylesheet";\
link.href = href;\
link.onerror = reject;\
link.onload = resolve;\
document.head.appendChild(link);\
});\
}

function tex(require) {\
return Promise.all([\
require(katex.resolve()),\
style(katex.resolve("dist/katex.min.css"))\
]).then(function(values) {\
var katex = values[0], tex = renderer();

```
  function renderer(options) {
    return function() {
      var root = document.createElement("div");
      katex.render(raw.apply(String, arguments), root, options);
      return root.removeChild(root.firstChild);
    };
  }

  tex.options = renderer;
  tex.block = renderer({displayMode: true});
  return tex;
});
```

}

async function vl(require) {\
const [v, vl, api] = await Promise.all([vega, vegalite, vegaliteApi].map(d => require(d.resolve())));\
return api.register(v, vl);\
}

function width() {\
return observe(function(change) {\
var width = change(document.body.clientWidth);\
function resized() {\
var w = document.body.clientWidth;\
if (w !== width) change(width = w);\
}\
window.addEventListener("resize", resized);\
return function() {\
window.removeEventListener("resize", resized);\
};\
});\
}

var Library = Object.assign(function Library(resolver) {\
const require = requirer(resolver);\
Object.defineProperties(this, properties({\
FileAttachment: () => NoFileAttachments,\
Arrow: () => require(arrow.resolve()),\
Inputs: () => require(inputs.resolve()),\
Mutable: () => Mutable,\
Plot: () => require(plot.resolve()),\
SQLite: () => sqlite(require),\
SQLiteDatabaseClient: () => SQLiteDatabaseClient,\
_: () => require(lodash.resolve()),\
aq: () => require.alias({"apache-arrow": arrow.resolve()})(arquero.resolve()),\
d3: () => require(d3.resolve()),\
dot: () => require(graphviz.resolve()),\
htl: () => require(htl.resolve()),\
html: () => html,\
md: () => md(require),\
now,\
require: () => require,\
resolve: () => resolve$1,\
svg: () => svg$1,\
tex: () => tex(require),\
topojson: () => require(topojson.resolve()),\
vl: () => vl(require),\
width,

```
  // Note: these are namespace objects, and thus exposed directly rather than
  // being wrapped in a function. This allows library.Generators to resolve,
  // rather than needing module.value.
  DOM,
  Files,
  Generators,
  Promises
}));
```

}, {resolve: require.resolve});

function properties(values) {\
return Object.fromEntries(Object.entries(values).map(property));\
}

function property([key, value]) {\
return [key, ({value, writable: true, enumerable: true})];\
}

function RuntimeError(message, input) {\
this.message = message + "";\
this.input = input;\
}

RuntimeError.prototype = Object.create(Error.prototype);\
RuntimeError.prototype.name = "RuntimeError";\
RuntimeError.prototype.constructor = RuntimeError;

function generatorish(value) {\
return value\
&& typeof value.next === "function"\
&& typeof value.return === "function";\
}

function load$1(notebook, library, observer) {\
if (typeof library == "function") observer = library, library = null;\
if (typeof observer !== "function") throw new Error("invalid observer");\
if (library == null) library = new Library();

```
const {modules, id} = notebook;
const map = new Map;
const runtime = new Runtime(library);
const main = runtime_module(id);

function runtime_module(id) {
  let module = map.get(id);
  if (!module) map.set(id, module = runtime.module());
  return module;
}

for (const m of modules) {
  const module = runtime_module(m.id);
  let i = 0;
  for (const v of m.variables) {
    if (v.from) module.import(v.remote, v.name, runtime_module(v.from));
    else if (module === main) module.variable(observer(v, i, m.variables)).define(v.name, v.inputs, v.value);
    else module.define(v.name, v.inputs, v.value);
    ++i;
  }
}

return runtime;
```

}

function constant(x) {\
return function() {\
return x;\
};\
}

function identity(x) {\
return x;\
}

function rethrow(e) {\
return function() {\
throw e;\
};\
}

var prototype = Array.prototype;\
var map$2 = prototype.map;

function noop() {}

var TYPE_NORMAL = 1; // a normal variable\
var TYPE_IMPLICIT = 2; // created on reference\
var TYPE_DUPLICATE = 3; // created on duplicate definition

var no_observer = {};

function Variable(type, module, observer) {\
if (!observer) observer = no_observer;\
Object.defineProperties(this, {\
_observer: {value: observer, writable: true},\
_definition: {value: variable_undefined, writable: true},\
_duplicate: {value: undefined, writable: true},\
_duplicates: {value: undefined, writable: true},\
_indegree: {value: NaN, writable: true}, // The number of computing inputs.\
_inputs: {value: [], writable: true},\
_invalidate: {value: noop, writable: true},\
_module: {value: module},\
_name: {value: null, writable: true},\
_outputs: {value: new Set, writable: true},\
_promise: {value: Promise.resolve(undefined), writable: true},\
_reachable: {value: observer !== no_observer, writable: true}, // Is this variable transitively visible?\
_rejector: {value: variable_rejector(this)},\
_type: {value: type},\
_value: {value: undefined, writable: true},\
_version: {value: 0, writable: true}\
});\
}

Object.defineProperties(Variable.prototype, {\
_pending: {value: variable_pending, writable: true, configurable: true},\
_fulfilled: {value: variable_fulfilled, writable: true, configurable: true},\
_rejected: {value: variable_rejected, writable: true, configurable: true},\
define: {value: variable_define, writable: true, configurable: true},\
delete: {value: variable_delete, writable: true, configurable: true},\
import: {value: variable_import, writable: true, configurable: true}\
});

function variable_attach(variable) {\
variable._module._runtime._dirty.add(variable);\
variable._outputs.add(this);\
}

function variable_detach(variable) {\
variable._module._runtime._dirty.add(variable);\
variable._outputs.delete(this);\
}

function variable_undefined() {\
throw variable_undefined;\
}

function variable_stale() {\
throw variable_stale;\
}

function variable_rejector(variable) {\
return function(error) {\
if (error === variable_stale) throw error;\
if (error === variable_undefined) throw new RuntimeError(variable._name + " is not defined", variable._name);\
if (error instanceof Error && error.message) throw new RuntimeError(error.message, variable._name);\
throw new RuntimeError(variable._name + " could not be resolved", variable._name);\
};\
}

function variable_duplicate(name) {\
return function() {\
throw new RuntimeError(name + " is defined more than once");\
};\
}

function variable_define(name, inputs, definition) {\
switch (arguments.length) {\
case 1: {\
definition = name, name = inputs = null;\
break;\
}\
case 2: {\
definition = inputs;\
if (typeof name === "string") inputs = null;\
else inputs = name, name = null;\
break;\
}\
}\
return variable_defineImpl.call(this,\
name == null ? null : name + "",\
inputs == null ? [] : map$2.call(inputs, this._module._resolve, this._module),\
typeof definition === "function" ? definition : constant(definition)\
);\
}

function variable_defineImpl(name, inputs, definition) {\
var scope = this._module._scope, runtime = this._module._runtime;

```
this._inputs.forEach(variable_detach, this);
inputs.forEach(variable_attach, this);
this._inputs = inputs;
this._definition = definition;
this._value = undefined;

// Is this an active variable (that may require disposal)?
if (definition === noop) runtime._variables.delete(this);
else runtime._variables.add(this);

// Did the variable’s name change? Time to patch references!
if (name !== this._name || scope.get(name) !== this) {
  var error, found;

  if (this._name) { // Did this variable previously have a name?
    if (this._outputs.size) { // And did other variables reference this variable?
      scope.delete(this._name);
      found = this._module._resolve(this._name);
      found._outputs = this._outputs, this._outputs = new Set;
      found._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(this)] = found; }, this);
      found._outputs.forEach(runtime._updates.add, runtime._updates);
      runtime._dirty.add(found).add(this);
      scope.set(this._name, found);
    } else if ((found = scope.get(this._name)) === this) { // Do no other variables reference this variable?
      scope.delete(this._name); // It’s safe to delete!
    } else if (found._type === TYPE_DUPLICATE) { // Do other variables assign this name?
      found._duplicates.delete(this); // This variable no longer assigns this name.
      this._duplicate = undefined;
      if (found._duplicates.size === 1) { // Is there now only one variable assigning this name?
        found = found._duplicates.keys().next().value; // Any references are now fixed!
        error = scope.get(this._name);
        found._outputs = error._outputs, error._outputs = new Set;
        found._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(error)] = found; });
        found._definition = found._duplicate, found._duplicate = undefined;
        runtime._dirty.add(error).add(found);
        runtime._updates.add(found);
        scope.set(this._name, found);
      }
    } else {
      throw new Error;
    }
  }

  if (this._outputs.size) throw new Error;

  if (name) { // Does this variable have a new name?
    if (found = scope.get(name)) { // Do other variables reference or assign this name?
      if (found._type === TYPE_DUPLICATE) { // Do multiple other variables already define this name?
        this._definition = variable_duplicate(name), this._duplicate = definition;
        found._duplicates.add(this);
      } else if (found._type === TYPE_IMPLICIT) { // Are the variable references broken?
        this._outputs = found._outputs, found._outputs = new Set; // Now they’re fixed!
        this._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(found)] = this; }, this);
        runtime._dirty.add(found).add(this);
        scope.set(name, this);
      } else { // Does another variable define this name?
        found._duplicate = found._definition, this._duplicate = definition; // Now they’re duplicates.
        error = new Variable(TYPE_DUPLICATE, this._module);
        error._name = name;
        error._definition = this._definition = found._definition = variable_duplicate(name);
        error._outputs = found._outputs, found._outputs = new Set;
        error._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(found)] = error; });
        error._duplicates = new Set([this, found]);
        runtime._dirty.add(found).add(error);
        runtime._updates.add(found).add(error);
        scope.set(name, error);
      }
    } else {
      scope.set(name, this);
    }
  }

  this._name = name;
}

// If this redefined variable was previously evaluated, invalidate it. (If the
// variable was never evaluated, then the invalidated value could never have
// been exposed and we can avoid this extra work.)
if (this._version > 0) ++this._version;

runtime._updates.add(this);
runtime._compute();
return this;
```

}

function variable_import(remote, name, module) {\
if (arguments.length < 3) module = name, name = remote;\
return variable_defineImpl.call(this, name + "", [module._resolve(remote + "")], identity);\
}

function variable_delete() {\
return variable_defineImpl.call(this, null, [], noop);\
}

function variable_pending() {\
if (this._observer.pending) this._observer.pending();\
}

function variable_fulfilled(value) {\
if (this._observer.fulfilled) this._observer.fulfilled(value, this._name);\
}

function variable_rejected(error) {\
if (this._observer.rejected) this._observer.rejected(error, this._name);\
}

function Module(runtime, builtins = []) {\
Object.defineProperties(this, {\
_runtime: {value: runtime},\
_scope: {value: new Map},\
_builtins: {value: new Map([\
["@variable", variable_variable],\
["invalidation", variable_invalidation],\
["visibility", variable_visibility],\
...builtins\
])},\
_source: {value: null, writable: true}\
});\
}

Object.defineProperties(Module.prototype, {\
_resolve: {value: module_resolve, writable: true, configurable: true},\
redefine: {value: module_redefine, writable: true, configurable: true},\
define: {value: module_define, writable: true, configurable: true},\
derive: {value: module_derive, writable: true, configurable: true},\
import: {value: module_import, writable: true, configurable: true},\
value: {value: module_value, writable: true, configurable: true},\
variable: {value: module_variable, writable: true, configurable: true},\
builtin: {value: module_builtin, writable: true, configurable: true}\
});

function module_redefine(name) {\
var v = this._scope.get(name);\
if (!v) throw new RuntimeError(name + " is not defined");\
if (v._type === TYPE_DUPLICATE) throw new RuntimeError(name + " is defined more than once");\
return v.define.apply(v, arguments);\
}

function module_define() {\
var v = new Variable(TYPE_NORMAL, this);\
return v.define.apply(v, arguments);\
}

function module_import() {\
var v = new Variable(TYPE_NORMAL, this);\
return v.import.apply(v, arguments);\
}

function module_variable(observer) {\
return new Variable(TYPE_NORMAL, this, observer);\
}

async function module_value(name) {\
var v = this._scope.get(name);\
if (!v) throw new RuntimeError(name + " is not defined");\
if (v._observer === no_observer) {\
v = this.variable(true).define([name], identity);\
try {\
return await module_revalue(this._runtime, v);\
} finally {\
v.delete();\
}\
} else {\
return module_revalue(this._runtime, v);\
}\
}

// If the variable is redefined before its value resolves, try again.\
async function module_revalue(runtime, variable) {\
await runtime._compute();\
try {\
return await variable._promise;\
} catch (error) {\
if (error === variable_stale) return module_revalue(runtime, variable);\
throw error;\
}\
}

function module_derive(injects, injectModule) {\
const map = new Map();\
const modules = new Set();\
const copies = [];

```
// Given a module, derives an alias of that module with an initially-empty
// definition. The variables will be copied later in a second pass below.
function alias(source) {
  let target = map.get(source);
  if (target) return target;
  target = new Module(source._runtime, source._builtins);
  target._source = source;
  map.set(source, target);
  copies.push([target, source]);
  modules.add(source);
  return target;
}

// Inject the given variables as reverse imports into the derived module.
const derive = alias(this);
for (const inject of injects) {
  const {alias, name} = typeof inject === "object" ? inject : {name: inject};
  derive.import(name, alias == null ? name : alias, injectModule);
}

// Iterate over all the variables (currently) in this module. If any
// represents an import-with (i.e., an import of a module with a _source), the
// transitive import-with must be copied, too, as direct injections may affect
// transitive injections. Note that an import-with can only be created with
// module.derive and hence it’s not possible for an import-with to be added
// later; therefore we only need to apply this check once, now.
for (const module of modules) {
  for (const [name, variable] of module._scope) {
    if (variable._definition === identity) { // import
      if (module === this && derive._scope.has(name)) continue; // overridden by injection
      const importedModule = variable._inputs[0]._module;
      if (importedModule._source) alias(importedModule);
    }
  }
}

// Finally, with the modules resolved, copy the variable definitions.
for (const [target, source] of copies) {
  for (const [name, sourceVariable] of source._scope) {
    const targetVariable = target._scope.get(name);
    if (targetVariable && targetVariable._type !== TYPE_IMPLICIT) continue; // preserve injection
    if (sourceVariable._definition === identity) { // import
      const sourceInput = sourceVariable._inputs[0];
      const sourceModule = sourceInput._module;
      target.import(sourceInput._name, name, map.get(sourceModule) || sourceModule);
    } else { // non-import
      target.define(name, sourceVariable._inputs.map(variable_name), sourceVariable._definition);
    }
  }
}

return derive;
```

}

function module_resolve(name) {\
var variable = this._scope.get(name), value;\
if (!variable) {\
variable = new Variable(TYPE_IMPLICIT, this);\
if (this._builtins.has(name)) {\
variable.define(name, constant(this._builtins.get(name)));\
} else if (this._runtime._builtin._scope.has(name)) {\
variable.import(name, this._runtime._builtin);\
} else {\
try {\
value = this._runtime._global(name);\
} catch (error) {\
return variable.define(name, rethrow(error));\
}\
if (value === undefined) {\
this._scope.set(variable._name = name, variable);\
} else {\
variable.define(name, constant(value));\
}\
}\
}\
return variable;\
}

function module_builtin(name, value) {\
this._builtins.set(name, value);\
}

function variable_name(variable) {\
return variable._name;\
}

const frame = typeof requestAnimationFrame === "function" ? requestAnimationFrame\
: typeof setImmediate === "function" ? setImmediate\
: f => setTimeout(f, 0);

var variable_variable = {};\
var variable_invalidation = {};\
var variable_visibility = {};

function Runtime(builtins = new Library, global = window_global) {\
var builtin = this.module();\
Object.defineProperties(this, {\
_dirty: {value: new Set},\
_updates: {value: new Set},\
_precomputes: {value: [], writable: true},\
_computing: {value: null, writable: true},\
_init: {value: null, writable: true},\
_modules: {value: new Map},\
_variables: {value: new Set},\
_disposed: {value: false, writable: true},\
_builtin: {value: builtin},\
_global: {value: global}\
});\
if (builtins) for (var name in builtins) {\
(new Variable(TYPE_IMPLICIT, builtin)).define(name, [], builtins[name]);\
}\
}

Object.defineProperties(Runtime, {\
load: {value: load$1, writable: true, configurable: true}\
});

Object.defineProperties(Runtime.prototype, {\
_precompute: {value: runtime_precompute, writable: true, configurable: true},\
_compute: {value: runtime_compute, writable: true, configurable: true},\
_computeSoon: {value: runtime_computeSoon, writable: true, configurable: true},\
_computeNow: {value: runtime_computeNow, writable: true, configurable: true},\
dispose: {value: runtime_dispose, writable: true, configurable: true},\
module: {value: runtime_module, writable: true, configurable: true},\
fileAttachments: {value: FileAttachments, writable: true, configurable: true}\
});

function runtime_dispose() {\
this._computing = Promise.resolve();\
this._disposed = true;\
this._variables.forEach(v => {\
v._invalidate();\
v._version = NaN;\
});\
}

function runtime_module(define, observer = noop) {\
let module;\
if (define === undefined) {\
if (module = this._init) {\
this._init = null;\
return module;\
}\
return new Module(this);\
}\
module = this._modules.get(define);\
if (module) return module;\
this._init = module = new Module(this);\
this._modules.set(define, module);\
try {\
define(this, observer);\
} finally {\
this._init = null;\
}\
return module;\
}

function runtime_precompute(callback) {\
this._precomputes.push(callback);\
this._compute();\
}

function runtime_compute() {\
return this._computing || (this._computing = this._computeSoon());\
}

function runtime_computeSoon() {\
return new Promise(frame).then(() => this._disposed ? undefined : this._computeNow());\
}

async function runtime_computeNow() {\
var queue = [],\
variables,\
variable,\
precomputes = this._precomputes;

```
// If there are any paused generators, resume them before computing so they
// can update (if synchronous) before computing downstream variables.
if (precomputes.length) {
  this._precomputes = [];
  for (const callback of precomputes) callback();
  await runtime_defer(3);
}

// Compute the reachability of the transitive closure of dirty variables.
// Any newly-reachable variable must also be recomputed.
// Any no-longer-reachable variable must be terminated.
variables = new Set(this._dirty);
variables.forEach(function(variable) {
  variable._inputs.forEach(variables.add, variables);
  const reachable = variable_reachable(variable);
  if (reachable > variable._reachable) {
    this._updates.add(variable);
  } else if (reachable < variable._reachable) {
    variable._invalidate();
  }
  variable._reachable = reachable;
}, this);

// Compute the transitive closure of updating, reachable variables.
variables = new Set(this._updates);
variables.forEach(function(variable) {
  if (variable._reachable) {
    variable._indegree = 0;
    variable._outputs.forEach(variables.add, variables);
  } else {
    variable._indegree = NaN;
    variables.delete(variable);
  }
});

this._computing = null;
this._updates.clear();
this._dirty.clear();

// Compute the indegree of updating variables.
variables.forEach(function(variable) {
  variable._outputs.forEach(variable_increment);
});

do {
  // Identify the root variables (those with no updating inputs).
  variables.forEach(function(variable) {
    if (variable._indegree === 0) {
      queue.push(variable);
    }
  });

  // Compute the variables in topological order.
  while (variable = queue.pop()) {
    variable_compute(variable);
    variable._outputs.forEach(postqueue);
    variables.delete(variable);
  }

  // Any remaining variables are circular, or depend on them.
  variables.forEach(function(variable) {
    if (variable_circular(variable)) {
      variable_error(variable, new RuntimeError("circular definition"));
      variable._outputs.forEach(variable_decrement);
      variables.delete(variable);
    }
  });
} while (variables.size);

function postqueue(variable) {
  if (--variable._indegree === 0) {
    queue.push(variable);
  }
}
```

}

// We want to give generators, if they’re defined synchronously, a chance to\
// update before computing downstream variables. This creates a synchronous\
// promise chain of the given depth that we’ll await before recomputing\
// downstream variables.\
function runtime_defer(depth = 0) {\
let p = Promise.resolve();\
for (let i = 0; i < depth; ++i) p = p.then(() => {});\
return p;\
}

function variable_circular(variable) {\
const inputs = new Set(variable._inputs);\
for (const i of inputs) {\
if (i === variable) return true;\
i._inputs.forEach(inputs.add, inputs);\
}\
return false;\
}

function variable_increment(variable) {\
++variable._indegree;\
}

function variable_decrement(variable) {\
--variable._indegree;\
}

function variable_value(variable) {\
return variable._promise.catch(variable._rejector);\
}

function variable_invalidator(variable) {\
return new Promise(function(resolve) {\
variable._invalidate = resolve;\
});\
}

function variable_intersector(invalidation, variable) {\
let node = typeof IntersectionObserver === "function" && variable._observer && variable._observer._node;\
let visible = !node, resolve = noop, reject = noop, promise, observer;\
if (node) {\
observer = new IntersectionObserver(([entry]) => (visible = entry.isIntersecting) && (promise = null, resolve()));\
observer.observe(node);\
invalidation.then(() => (observer.disconnect(), observer = null, reject()));\
}\
return function(value) {\
if (visible) return Promise.resolve(value);\
if (!observer) return Promise.reject();\
if (!promise) promise = new Promise((y, n) => (resolve = y, reject = n));\
return promise.then(() => value);\
};\
}

function variable_compute(variable) {\
variable._invalidate();\
variable._invalidate = noop;\
variable._pending();

```
const value0 = variable._value;
const version = ++variable._version;

// Lazily-constructed invalidation variable; only constructed if referenced as an input.
let invalidation = null;

// If the variable doesn’t have any inputs, we can optimize slightly.
const promise = variable._promise = (variable._inputs.length
    ? Promise.all(variable._inputs.map(variable_value)).then(define)
    : new Promise(resolve => resolve(variable._definition.call(value0))))
  .then(generate);

// Compute the initial value of the variable.
function define(inputs) {
  if (variable._version !== version) throw variable_stale;

  // Replace any reference to invalidation with the promise, lazily.
  for (var i = 0, n = inputs.length; i < n; ++i) {
    switch (inputs[i]) {
      case variable_invalidation: {
        inputs[i] = invalidation = variable_invalidator(variable);
        break;
      }
      case variable_visibility: {
        if (!invalidation) invalidation = variable_invalidator(variable);
        inputs[i] = variable_intersector(invalidation, variable);
        break;
      }
      case variable_variable: {
        inputs[i] = variable;
        break;
      }
    }
  }

  return variable._definition.apply(value0, inputs);
}

// If the value is a generator, then retrieve its first value, and dispose of
// the generator if the variable is invalidated. Note that the cell may
// already have been invalidated here, in which case we need to terminate the
// generator immediately!
function generate(value) {
  if (variable._version !== version) throw variable_stale;
  if (generatorish(value)) {
    (invalidation || variable_invalidator(variable)).then(variable_return(value));
    return variable_generate(variable, version, value);
  }
  return value;
}

promise.then((value) => {
  variable._value = value;
  variable._fulfilled(value);
}, (error) => {
  if (error === variable_stale) return;
  variable._value = undefined;
  variable._rejected(error);
});
```

}

function variable_generate(variable, version, generator) {\
const runtime = variable._module._runtime;\
let currentValue; // so that yield resolves to the yielded value

```
// Retrieve the next value from the generator; if successful, invoke the
// specified callback. The returned promise resolves to the yielded value, or
// to undefined if the generator is done.
function compute(onfulfilled) {
  return new Promise(resolve => resolve(generator.next(currentValue))).then(({done, value}) => {
    return done ? undefined : Promise.resolve(value).then(onfulfilled);
  });
}

// Retrieve the next value from the generator; if successful, fulfill the
// variable, compute downstream variables, and schedule the next value to be
// pulled from the generator at the start of the next animation frame. If not
// successful, reject the variable, compute downstream variables, and return.
function recompute() {
  const promise = compute((value) => {
    if (variable._version !== version) throw variable_stale;
    currentValue = value;
    postcompute(value, promise).then(() => runtime._precompute(recompute));
    variable._fulfilled(value);
    return value;
  });
  promise.catch((error) => {
    if (error === variable_stale || variable._version !== version) return;
    postcompute(undefined, promise);
    variable._rejected(error);
  });
}

// After the generator fulfills or rejects, set its current value, promise,
// and schedule any downstream variables for update.
function postcompute(value, promise) {
  variable._value = value;
  variable._promise = promise;
  variable._outputs.forEach(runtime._updates.add, runtime._updates);
  return runtime._compute();
}

// When retrieving the first value from the generator, the promise graph is
// already established, so we only need to queue the next pull.
return compute((value) => {
  if (variable._version !== version) throw variable_stale;
  currentValue = value;
  runtime._precompute(recompute);
  return value;
});
```

}

function variable_error(variable, error) {\
variable._invalidate();\
variable._invalidate = noop;\
variable._pending();\
++variable._version;\
variable._indegree = NaN;\
(variable._promise = Promise.reject(error)).catch(noop);\
variable._value = undefined;\
variable._rejected(error);\
}

function variable_return(generator) {\
return function() {\
generator.return();\
};\
}

function variable_reachable(variable) {\
if (variable._observer !== no_observer) return true; // Directly reachable.\
var outputs = new Set(variable._outputs);\
for (const output of outputs) {\
if (output._observer !== no_observer) return true;\
output._outputs.forEach(outputs.add, outputs);\
}\
return false;\
}

function window_global(name) {\
return window[name];\
}

const MONITOR_INTERVAL = 200;

class DocumentBodyDimensionsMutationObserverMonitor {\
constructor() {\
this.lastHeight = -1;

```
  this.onMutation = entries => {
    const height = document.body.clientHeight;
    if (height !== this.lastHeight) {
      this.lastHeight = height;
      postHeight(this.lastHeight);
    }
  };
}

start() {
  this.observer = new MutationObserver(this.onMutation);
  this.observer.observe(document.body, {
    childList: true,
    attributes: true,
    subtree: true
  });
}
```

}

class DocumentBodyDimensionsResizeObserverMonitor {\
constructor() {\
if (typeof window.ResizeObserver === "undefined") {\
throw Error("ResizeObserver is not supported");\
}\
this.lastHeight = -1;

```
  this.onResize = entries => {
    for (let entry of entries) {
      const height = entry.contentRect.height;
      if (height !== this.lastHeight) {
        this.lastHeight = height;
        postHeight(this.lastHeight);
      }
    }
  };
}

start() {
  this.observer = new ResizeObserver(this.onResize);
  this.observer.observe(document.body);
}
```

}

class DocumentBodyDimensionsPollingMonitor {\
constructor() {\
this.lastHeight = -1;\
this.timer = undefined;

```
  this.checkAndSchedule = () => {
    if (!this.monitoring) return;
    this.check();
    this.monitoring = setTimeout(this.checkAndSchedule, MONITOR_INTERVAL);
  };
}

start() {
  if (!this.monitoring) {
    this.monitoring = true;
    this.checkAndSchedule();
  }
}

stop() {
  if (this.monitoring) {
    clearTimeout(this.monitoring);
  }
  this.monitoring = undefined;
}

check() {
  const height = document.body.clientHeight;
  if (height !== this.lastHeight) {
    this.lastHeight = height;
    postHeight(this.lastHeight);
  }
}
```

}

function postHeight(height) {\
window.parent.postMessage(\
{\
type: "iframeSize",\
height\
},\
"*"\
);\
}

const monitor = () => {\
if (typeof window.ResizeObserver !== "undefined") {\
new DocumentBodyDimensionsResizeObserverMonitor().start();\
} else {\
new DocumentBodyDimensionsMutationObserverMonitor().start();\
}\
};

const embed = async (slug, into, cells, inputs = {}) => {\
const moduleUrl = "[https://api.observablehq.com/](https://api.observablehq.com/)" + slug + ".js?v=3";\
const define = (await import(moduleUrl)).default;\
const inspect = Inspector.into(into);\
const filter = cells ? name => cells.includes(name) : name => true;\
const main = new Runtime().module(define, name => filter(name) ? inspect() : true);\
for (let name of Object.keys(inputs)) {\
main.redefine(name, inputs[name]);\
}\
return main;\
};

exports.DocumentBodyDimensionsMutationObserverMonitor = DocumentBodyDimensionsMutationObserverMonitor;\
exports.DocumentBodyDimensionsPollingMonitor = DocumentBodyDimensionsPollingMonitor;\
exports.DocumentBodyDimensionsResizeObserverMonitor = DocumentBodyDimensionsResizeObserverMonitor;\
exports.embed = embed;\
exports.monitor = monitor;

return exports;

}({}));

CLOSESCRIPT

Even though we are only actually asking for the **data lineage** using the *last* SQL query and the table it made, *kiara* shows us everything that has happened since we first downloaded the file. This helps us keep an eye on the research process *and* the changes we are making to the data at the same time!

That's great, you've completed the first notebook and successfully installed *kiara*, downloaded files, tested out some functions, and are able to see what this does to your data.

Now you can check out the other plugin packages to explore how this helps you manage and trace your data while using digital analysis tools!

<h1>Hello <i>kiara</i>.</h1>\
<h3>Introducing <i>kiara</i>, a new data orchestration tool.</h3><h2>Installation</h2><h2>Running <i>kiara</i></h2><h3>Downloading Files</h3><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">                                                                                                                                            \
<span style="font-style: italic">Author(s)        </span>                                                                                                                          \
<span style="font-style: italic">                 </span>   Markus Binsteiner  <span style="font-style: italic"> markus@frkl.io </span>                                                                                    \
<span style="font-style: italic">                 </span>                                                                                                                          \
<span style="font-style: italic">Context          </span>                                                                                                                          \
<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Tags       </span>  onboarding                                                                                                \
<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Labels     </span>  <span style="font-style: italic">package</span>: kiara_plugin.onboarding                                                                          \
<span style="font-style: italic">                 </span>  <span style="font-style: italic"> References </span>  <span style="font-style: italic">source_repo</span>: <a href="https://github.com/DHARPA-Project/kiara_plugin.onboarding" target="_blank">https://github.com/DHARPA-Project/kiara_plugin.onboarding</a>                                    \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">            </span>  <span style="font-style: italic">documentation</span>: <a href="https://DHARPA-Project.github.io/kiara_plugin.onboarding/" target="_blank">https://DHARPA-Project.github.io/kiara_plugin.onboarding/</a>                                  \
<span style="font-style: italic">                 </span>                                                                                                                          \
<span style="font-style: italic">Operation details</span>                                                                                                                          \
<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Documentation </span>  Download a single file from a remote location.                                                         \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>                                                                                                         \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  The result of this operation is a single value of type 'file' (basically an array of raw bytes),       \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  which can then be used in other modules to                                                             \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  create more meaningful data structures.                                                                \
<span style="font-style: italic">                 </span>                                                                                                                          \
<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Inputs        </span>                                                                                                         \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-weight: bold"> field name </span> <span style="font-weight: bold"> type   </span> <span style="font-weight: bold"> description                                  </span> <span style="font-weight: bold"> Required </span> <span style="font-weight: bold"> Default          </span>    \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   ──────────────────────────────────────────────────────────────────────────────────────────────────    \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> url        </span>  string   The url of the file to download.               <span style="font-weight: bold">yes</span>        -- no default --     \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> file_name  </span>  string   The file name to use for the downloaded        no         -- no default --     \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic">            </span>           file.                                                                          \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>                                                                                                         \
<span style="font-style: italic">                 </span>                                                                                                                          \
<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Outputs       </span>                                                                                                         \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-weight: bold"> field name        </span> <span style="font-weight: bold"> type </span> <span style="font-weight: bold"> description                                                           </span>    \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   ──────────────────────────────────────────────────────────────────────────────────────────────────    \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> file              </span>  file   The downloaded file.                                                      \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> download_metadata </span>  dict   Metadata about the download.                                              \
<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>                                                                                                         \
<span style="font-style: italic">                 </span>                                                                                                                          \
\
</pre><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮\
│                                                                                                                                          │\
│  <span style="font-weight: bold"> field             </span> <span style="font-weight: bold"> value                                                                                                            </span>  │\
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │\
│  <span style="font-weight: bold"> download_metadata </span> <span style="font-style: italic">                                                                                                                  </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">   dict data     </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">{</span><span style="font-style: italic">                                                                                                </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">  </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"response_headers"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: [</span><span style="font-style: italic">                                                                          </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">    {</span><span style="font-style: italic">                                                                                            </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"connection"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"keep-alive"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"content-length"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"7436"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                  </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"cache-control"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"max-age=300"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                            </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"content-security-policy"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"default-src 'none'; style-src 'unsafe-inline'; sandbox"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">       </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"content-type"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"text/plain; charset=utf-8"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                               </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"etag"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"W/"641ae85d69e5836d27ea8906aba0a33b48b0f3ed0ed4c40d21a07fccebdd238d""</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">          </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"strict-transport-security"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"max-age=31536000"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                           </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-content-type-options"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"nosniff"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                       </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-frame-options"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"deny"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                 </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-xss-protection"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"1; mode=block"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                       </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-github-request-id"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"5428:E056:DE6D8:E58DB:6527E802"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                   </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"content-encoding"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"gzip"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"accept-ranges"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"bytes"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                  </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"date"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"Thu, 12 Oct 2023 12:35:15 GMT"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                   </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"via"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"1.1 varnish"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                      </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-served-by"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"cache-fra-eddf8230131-FRA"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-cache"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"MISS"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                         </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-cache-hits"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"0"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                       </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-timer"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"S1697114115.825867,VS0,VE179"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                 </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"vary"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"Authorization,Accept-Encoding,Origin"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                            </span>  │\
│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"access-control-allow-origin"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"*"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                        </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"cross-origin-resource-policy"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"cross-origin"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"x-fastly-request-id"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"aa72f9a416f0a1fb259a8f6a986059d83a8119ff"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                         </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"expires"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"Thu, 12 Oct 2023 12:40:15 GMT"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">      </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"source-age"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"0"</span><span style="font-style: italic">                                                                          </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">    }</span><span style="font-style: italic">                                                                                            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">  ],</span><span style="font-style: italic">                                                                                             </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">  </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"request\_time"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"2023-10-12T12:35:14.923561+00:00"</span><span style="font-style: italic">                                             </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">}</span><span style="font-style: italic">                                                                                                </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">   dict schema   </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">{</span><span style="font-style: italic">                                                                                                </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">  </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"title"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"dict"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">,</span><span style="font-style: italic">                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">  </span><span style="color: #ff4689; text-decoration-color: #ff4689; background-color: #ffffff">"type"</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">: </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #ffffff">"object"</span><span style="font-style: italic">                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #ffffff">}</span><span style="font-style: italic">                                                                                                </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                                                                                                                  </span>  │*\
*│  <span style="font-weight: bold"> file              </span> <span style="font-style: italic"> ﻿Id,Label,JournalType,City,CountryNetworkTime,PresentDayCountry,Latitude,Longitude,Language                      </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 75,Psychiatrische en neurologische bladen,specialized: psychiatry and                                            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> neurology,Amsterdam,Netherlands,Netherlands,52.366667,4.9,Dutch                                                  </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 36,The American Journal of Insanity,specialized: psychiatry and neurology,Baltimore,United States,United         </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> States,39.289444,-76.615278,English                                                                              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 208,The American Journal of Psychology,specialized: psychology,Baltimore,United States,United                    </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> States,39.289444,-76.615278,English                                                                              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 295,Die Krankenpflege,specialized: therapy,Berlin,German Empire,Germany,52.52,13.405,German                      </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 296,Die deutsche Klinik am Eingange des zwanzigsten Jahrhunderts,general medicine,Berlin,German                  </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 300,Therapeutische Monatshefte,specialized: therapy,Berlin,German Empire,Germany,52.52,13.405,German             </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 1,Allgemeine Zeitschrift für Psychiatrie,specialized: psychiatry and neurology,Berlin,German                     </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 7,Archiv für Psychiatrie und Nervenkrankheiten,specialized: psychiatry and neurology,Berlin,German               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 10,Berliner klinische Wochenschrift,general medicine,Berlin,German Empire,Germany,52.52,13.405,German            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 13,Charité Annalen,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                             </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 21,Monatsschrift für Psychiatrie und Neurologie,specialized: psychiatry and neurology,Berlin,German              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 29,Virchows Archiv,"specialized: anatomy, physiology and pathology",Berlin,German                                </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 31,Zeitschrift für pädagogische Psychologie und Pathologie,specialized: psychology and pedagogy,Berlin,German    </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 42,Vierteljahrsschrift für gerichtliche Medizin und öffentliches Sanitätswesen,"specialized: anthropology,       </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> criminology and forensics",Berlin,German Empire,Germany,52.52,13.405,German                                      </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 47,Centralblatt für Nervenheilkunde und Psychiatrie,specialized: psychiatry and neurology,Berlin,German          </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 50,Russische medicinische Rundschau,general medicine,Berlin,German Empire,Germany,52.52,13.405,German            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 76,Deutsche Aerzte-Zeitung,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                     </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 87,Monatsschrift für Geburtshülfe und Gynäkologie,specialized: gynecology,Berlin,German                          </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 108,Archiv für klinische Chirurgie,specialized: surgery,Berlin,German Empire,Germany,52.52,13.405,German         </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 113,Zeitschrift für klinische Medicin,general medicine,Berlin,German Empire,Germany,52.52,13.405,German          </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 159,Deutsche militärärztliche Zeitschrift,specialized: military medicine,Berlin,German                           </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.52,13.405,German                                                                               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 162,Jahresbericht über die Leistungen und Fortschritte auf dem Gebiete der Neurologie und                        </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Psychiatrie,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German               </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 192,Ärztliche Sachverständigen-Zeitung,general medicine,Berlin,German Empire,Germany,52.52,13.405,German         </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 198,Zeitschrift für die Behandlung Schwachsinniger und Epileptischer,specialized: psychiatry and                 </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> neurology,Berlin,German Empire,Germany,52.52,13.405,German                                                       </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 258,Der Pfarrbote,news media,Berlin,German Empire,Germany,52.52,13.405,German                                    </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 71,Correspondenz-Blatt für Schweizer Aerzte,general                                                              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> medicine,Bern,Switzerland,Switzerland,46.948056,7.4475,German                                                    </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 6,Archiv für mikroskopische Anatomie,"specialized: anatomy, physiology and pathology",Bonn,German                </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,50.733333,7.1,German                                                                              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 203,The Journal of Abnormal Psychology,specialized: psychology,Boston,United States,United                       </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> States,42.358056,-71.063611,English                                                                              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 273,"Correspondenz-Blatt der Deutschen Gesellschaft für Anthropologie, Ethnologie und                            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Urgeschichte","specialized: anthropology, criminology and forensics",Braunschweig,German                         </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> Empire,Germany,52.266667,10.516667,German                                                                        </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 303,Policlinique de Bruxelles,general medicine,Brussels,Belgium,Belgium,50.85,4.35,French                        </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 306,Annales de la Société Belge de Neurologie,specialized: psychiatry and                                        </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> neurology,Brussels,Belgium,Belgium,50.85,4.35,French                                                             </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 19,Journal de neurologie,specialized: psychiatry and neurology,Brussels,Belgium,Belgium,50.85,4.35,French        </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 25,"Revue internationale d'électrothérapie, de physiologie, de médecine, de chirurgie, d'obstétrique, de         </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> thérapeutique, de chimie et de pharmacie",general medicine,Brussels,Belgium,Belgium,50.85,4.35,French            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> 35,Bulletin de la Société de Médecine Mentale de Belgique,specialized: psychiatry and                            </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> neurology,Brussels,Belgium,Belgium,50.85,4.35,French                                                             </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> ...                                                                                                              </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic">                                                                                                                  </span>  │*\
*│  <span style="font-weight: bold">                   </span> <span style="font-style: italic"> ...                                                                                                              </span>  │*\
*│                                                                                                                                          │*\
*╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯*\
*</pre><h3>New Formats: Creating and Converting</h3><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">*                                                                                                                                            \
*<span style="font-style: italic">Author(s)        </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>   Markus Binsteiner  <span style="font-style: italic"> markus@frkl.io </span>*                                                                                    \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">Context          </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Tags       </span>  tabular*                                                                                                   \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Labels     </span>  <span style="font-style: italic">package</span>: kiara\_plugin.tabular*                                                                             \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> References </span>  <span style="font-style: italic">source\_repo</span>: <a href="https://github.com/DHARPA-Project/kiara\_plugin.tabular" target="\_blank">https://github.com/DHARPA-Project/kiara\_plugin.tabular</a>*                                       \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">            </span>  <span style="font-style: italic">documentation</span>: <a href="https://DHARPA-Project.github.io/kiara\_plugin.tabular/" target="\_blank">https://DHARPA-Project.github.io/kiara\_plugin.tabular/</a>*                                     \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">Operation details</span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Documentation </span>  Create a table from a file, trying to auto-determine the format of said file.*                          \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Inputs        </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-weight: bold"> field name          </span> <span style="font-weight: bold"> type    </span> <span style="font-weight: bold"> description                        </span> <span style="font-weight: bold"> Required </span> <span style="font-weight: bold"> Default          </span>*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   ──────────────────────────────────────────────────────────────────────────────────────────────────*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> file                </span>  file      The source value (of type 'file').   <span style="font-weight: bold">yes</span>        -- no default --*     \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> first\_row\_is\_header </span>  boolean   Whether the first row of the file    no         -- no default --*     \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic">                     </span>            is a header row. If not provided,*                                    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic">                     </span>            kiara will try to auto-determine.*                                    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Outputs       </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-weight: bold"> field name </span> <span style="font-weight: bold"> type  </span> <span style="font-weight: bold"> description                                                                 </span>*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   ──────────────────────────────────────────────────────────────────────────────────────────────────*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> table      </span>  table   The result value (of type 'table').*                                             \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
\**\
*</pre><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮*\
*│                                                                                                                                          │*\
*│  <span style="font-weight: bold"> field </span> <span style="font-weight: bold"> value                                                                                                                        </span>  │*\
*│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │*\
*│  <span style="font-weight: bold"> table </span> <span style="font-style: italic">                                                                                                                              </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">  </span><span style="font-weight: bold; font-style: italic"> Id  </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Label          </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> JournalType    </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> City      </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> CountryNetworkT </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> PresentDayCoun </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Latitude  </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Longitude  </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Language </span><span style="font-style: italic">  </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   75    Psychiatrische   specialized: p   Amsterdam   Netherlands       Netherlands      52.366667   4.9          Dutch      </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   36    The American J   specialized: p   Baltimore   United States     United States    39.289444   -76.615278   English    </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   208   The American J   specialized: p   Baltimore   United States     United States    39.289444   -76.615278   English    </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   295   Die Krankenpfl   specialized: t   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   296   Die deutsche K   general medici   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   300   Therapeutische   specialized: t   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   1     Allgemeine Zei   specialized: p   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   7     Archiv für Psy   specialized: p   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   10    Berliner klini   general medici   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   13    Charité Annale   general medici   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   21    Monatsschrift    specialized: p   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   29    Virchows Archi   specialized: a   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   31    Zeitschrift fü   specialized: p   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   42    Vierteljahrssc   specialized: a   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   47    Centralblatt f   specialized: p   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   50    Russische medi   general medici   Berlin      German Empire     Germany          52.52       13.405       German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   ...   ...              ...              ...         ...               ...              ...         ...          ...        </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   ...   ...              ...              ...         ...               ...              ...         ...          ...        </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   277   L'arte medica    general medici   Turin       Italy             Italy            45.079167   7.676111     Italian    </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   288   Allgemeine öst   specialized: a   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   18    Jahrbücher für   specialized: p   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   30    Wiener klinisc   general medici   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   44    Wiener klinisc   general medici   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   45    Wiener medizin   general medici   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   72    Wiener medizin   general medici   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   81    Monatsschrift    general medici   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   93    Klinisch-thera   general medici   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   151   Medicinisch-ch   specialized: s   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   199   Der Militärazt   specialized: m   Vienna      Austro-Hungaria   Austria          48.2        16.366667    German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   261   Медицинская бе   general medici   Voronezh    Russian Empire    Russia           51.671667   39.210556    Russian    </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   77    Medycyna         general medici   Warsaw      Russian Empire    Poland           52.233333   21.016667    Polish     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   150   Kronika Lekars   general medici   Warsaw      Russian Empire    Poland           52.233333   21.016667    Polish     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   86    Grenzfragen de   specialized: p   Wiesbaden   German Empire     Germany          50.0825     8.24         German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">   206   Ergebnisse der   specialized: a   Wiesbaden   German Empire     Germany          50.0825     8.24         German     </span>  │*\
*│  <span style="font-weight: bold">       </span> <span style="font-style: italic">                                                                                                                              </span>  │*\
*│                                                                                                                                          │*\
*╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯*\
*</pre><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">*                                                                                                                                            \
*<span style="font-style: italic"> value\_id          </span>  36df833f-0dbe-4683-b912-42c73df877ac*                                                                                  \
*<span style="font-style: italic"> kiara\_id          </span>  441206f8-e5b4-43d1-b198-d4741dc64e04*                                                                                  \
*<span style="font-style: italic">                   </span>*                                                                                                                        \
*<span style="font-style: italic">                   </span>  <span style="color: #00ff00; text-decoration-color: #00ff00">────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>*  \
*<span style="font-style: italic"> data\_type\_info    </span>*                                                                                                                        \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> data\_type\_name   </span>  table*                                                                                            \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> data\_type\_config </span>  {}*                                                                                               \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> characteristics  </span>  {*                                                                                                \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>    "is\_scalar": false,*                                                                            \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>    "is\_json\_serializable": false*                                                                  \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>  }*                                                                                                \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> data\_type\_class  </span>*                                                                                                   \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>   <span style="font-style: italic"> python\_class\_name  </span>  TableType*                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>   <span style="font-style: italic"> python\_module\_name </span>  kiara\_plugin.tabular.data\_types.table*                                     \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>   <span style="font-style: italic"> full\_name          </span>  kiara\_plugin.tabular.data\_types.table.TableType*                           \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>*                                                                                                   \
*<span style="font-style: italic">                   </span>*                                                                                                                        \
*<span style="font-style: italic"> destiny\_backlinks </span>  {}*                                                                                                                    \
*<span style="font-style: italic"> enviroments       </span>  None*                                                                                                                  \
*<span style="font-style: italic"> property\_links    </span>  {*                                                                                                                     \
*<span style="font-style: italic">                   </span>    "metadata.python\_class": "2e52a3a1-de3d-4202-aea1-90a0cec145e0",*                                                    \
*<span style="font-style: italic">                   </span>    "metadata.table": "29bc8c46-be1b-4a3a-8f52-a58c1f194cc2"*                                                            \
*<span style="font-style: italic">                   </span>  }*                                                                                                                     \
*<span style="font-style: italic"> value\_hash        </span>  zdpuAn89Et1ENzfoASJRYcWEceyfRiPg664mN4nnHLFnjRLyg*                                                                     \
*<span style="font-style: italic"> value\_schema      </span>*                                                                                                                        \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> type        </span>  table*                                                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> type\_config </span>  {}*                                                                                                    \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> default     </span>*  ***not\_set***                                                                                           **\
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> optional    </span>  False*                                                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> is\_constant </span>  False*                                                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> doc         </span>  The result value (of type 'table').*                                                                   \
*<span style="font-style: italic">                   </span>*                                                                                                                        \
*<span style="font-style: italic"> value\_size        </span>  42.79 KB*                                                                                                              \
*<span style="font-style: italic"> value\_status      </span>  <span style="font-style: italic">-- set --</span>*                                                                                                             \
\**\
*</pre><h3>Querying our Data</h3><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">*                                                                                                                                            \
*<span style="font-style: italic">Author(s)        </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>   Markus Binsteiner  <span style="font-style: italic"> markus@frkl.io </span>*                                                                                    \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">Context          </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Tags       </span>  tabular*                                                                                                   \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Labels     </span>  <span style="font-style: italic">package</span>: kiara\_plugin.tabular*                                                                             \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> References </span>  <span style="font-style: italic">source\_repo</span>: <a href="https://github.com/DHARPA-Project/kiara\_plugin.tabular" target="\_blank">https://github.com/DHARPA-Project/kiara\_plugin.tabular</a>*                                       \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">            </span>  <span style="font-style: italic">documentation</span>: <a href="https://DHARPA-Project.github.io/kiara\_plugin.tabular/" target="\_blank">https://DHARPA-Project.github.io/kiara\_plugin.tabular/</a>*                                     \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">Operation details</span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Documentation </span>  Execute a sql query against an (Arrow) table.*                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  The default relation name for the sql query is 'data', but can be modified by the 'relation\_name'*      \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  config option/input.*                                                                                   \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  If the 'query' module config option is not set, users can provide their own query, otherwise the*       \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  pre-set*                                                                                                \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>  one will be used.*                                                                                      \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Inputs        </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-weight: bold"> field name    </span> <span style="font-weight: bold"> type   </span> <span style="font-weight: bold"> description                               </span> <span style="font-weight: bold"> Required </span> <span style="font-weight: bold"> Default          </span>*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   ──────────────────────────────────────────────────────────────────────────────────────────────────*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> table         </span>  table    The table to query                          <span style="font-weight: bold">yes</span>        -- no default --*     \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> query         </span>  string   The query, use the value of the             <span style="font-weight: bold">yes</span>        -- no default --*     \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic">               </span>           'relation\_name' input as table, e.g.*                                        \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic">               </span>           'select \* from data'.*                                                       \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> relation\_name </span>  string   The name the table is referred to in the    no         data*                 \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic">               </span>           sql query.*                                                                  \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic"> Outputs       </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-weight: bold"> field name   </span> <span style="font-weight: bold"> type  </span> <span style="font-weight: bold"> description                                                               </span>*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   ──────────────────────────────────────────────────────────────────────────────────────────────────*    \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>   <span style="font-style: italic"> query\_result </span>  table   The query result.*                                                             \
*<span style="font-style: italic">                 </span>  <span style="font-style: italic">               </span>*                                                                                                         \
*<span style="font-style: italic">                 </span>*                                                                                                                          \
\**\
*</pre><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮*\
*│                                                                                                                                          │*\
*│  <span style="font-weight: bold"> field        </span> <span style="font-weight: bold"> value                                                                                                                 </span>  │*\
*│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │*\
*│  <span style="font-weight: bold"> query\_result </span> <span style="font-style: italic">                                                                                                                       </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">  </span><span style="font-weight: bold; font-style: italic"> Id  </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Label          </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> JournalType    </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> City   </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> CountryNetwor </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> PresentDayCoun </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Latitude </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Longitude </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Language </span><span style="font-style: italic">  </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">  ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────  </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   295   Die Krankenpfl   specialized: t   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   296   Die deutsche K   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   300   Therapeutische   specialized: t   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   1     Allgemeine Zei   specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   7     Archiv für Psy   specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   10    Berliner klini   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   13    Charité Annale   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   21    Monatsschrift    specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   29    Virchows Archi   specialized: a   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   31    Zeitschrift fü   specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   42    Vierteljahrssc   specialized: a   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   47    Centralblatt f   specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   50    Russische medi   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   76    Deutsche Aerzt   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   87    Monatsschrift    specialized: g   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   108   Archiv für kli   specialized: s   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   113   Zeitschrift fü   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   159   Deutsche milit   specialized: m   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   162   Jahresbericht    specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   192   Ärztliche Sach   general medici   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   198   Zeitschrift fü   specialized: p   Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   258   Der Pfarrbote    news media       Berlin   German Empire   Germany          52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">                                                                                                                       </span>  │*\
*│                                                                                                                                          │*\
*╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯*\
*</pre><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮*\
*│                                                                                                                                          │*\
*│  <span style="font-weight: bold"> field        </span> <span style="font-weight: bold"> value                                                                                                                 </span>  │*\
*│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │*\
*│  <span style="font-weight: bold"> query\_result </span> <span style="font-style: italic">                                                                                                                       </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">  </span><span style="font-weight: bold; font-style: italic"> Id  </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Label          </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> JournalType    </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> City   </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> CountryNetwork </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> PresentDayCou </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Latitude </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Longitude </span><span style="font-style: italic"> </span><span style="font-weight: bold; font-style: italic"> Language </span><span style="font-style: italic">  </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">  ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────  </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   296   Die deutsche K   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   10    Berliner klini   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   13    Charité Annale   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   50    Russische medi   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   76    Deutsche Aerzt   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   113   Zeitschrift fü   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">   192   Ärztliche Sach   general medici   Berlin   German Empire    Germany         52.52      13.405      German     </span>  │*\
*│  <span style="font-weight: bold">              </span> <span style="font-style: italic">                                                                                                                       </span>  │*\
*│                                                                                                                                          │*\
*╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯*\
*</pre><h3>Recording and Tracing our Data</h3><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">*                                                                                                                                            \
*<span style="font-style: italic"> value\_id          </span>  008e4800-677d-4f10-a94f-a47a5822b1a0*                                                                                  \
*<span style="font-style: italic"> kiara\_id          </span>  441206f8-e5b4-43d1-b198-d4741dc64e04*                                                                                  \
*<span style="font-style: italic">                   </span>*                                                                                                                        \
*<span style="font-style: italic">                   </span>  <span style="color: #00ff00; text-decoration-color: #00ff00">────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>*  \
*<span style="font-style: italic"> data\_type\_info    </span>*                                                                                                                        \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> data\_type\_name   </span>  table*                                                                                            \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> data\_type\_config </span>  {}*                                                                                               \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> characteristics  </span>  {*                                                                                                \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>    "is\_scalar": false,*                                                                            \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>    "is\_json\_serializable": false*                                                                  \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>  }*                                                                                                \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> data\_type\_class  </span>*                                                                                                   \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>   <span style="font-style: italic"> python\_class\_name  </span>  TableType*                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>   <span style="font-style: italic"> python\_module\_name </span>  kiara\_plugin.tabular.data\_types.table*                                     \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>   <span style="font-style: italic"> full\_name          </span>  kiara\_plugin.tabular.data\_types.table.TableType*                           \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic">                  </span>*                                                                                                   \
*<span style="font-style: italic">                   </span>*                                                                                                                        \
*<span style="font-style: italic"> destiny\_backlinks </span>  {}*                                                                                                                    \
*<span style="font-style: italic"> enviroments       </span>  None*                                                                                                                  \
*<span style="font-style: italic"> property\_links    </span>  {*                                                                                                                     \
*<span style="font-style: italic">                   </span>    "metadata.python\_class": "69a56eb4-98f7-4d38-bad1-51b7dc6bc300",*                                                    \
*<span style="font-style: italic">                   </span>    "metadata.table": "2a73f673-0cff-45f2-bd6e-393343d6edc0"*                                                            \
*<span style="font-style: italic">                   </span>  }*                                                                                                                     \
*<span style="font-style: italic"> value\_hash        </span>  zdpuB2LfZYHdiuR1sxy2ZkjPZ7JDnhysN48Y4RN9WNT4AvNN6*                                                                     \
*<span style="font-style: italic"> value\_schema      </span>*                                                                                                                        \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> type        </span>  table*                                                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> type\_config </span>  {}*                                                                                                    \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> default     </span>*  ***not\_set***                                                                                           **\
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> optional    </span>  False*                                                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> is\_constant </span>  False*                                                                                                 \
*<span style="font-style: italic">                   </span>   <span style="font-style: italic"> doc         </span>  The query result.*                                                                                     \
*<span style="font-style: italic">                   </span>*                                                                                                                        \
*<span style="font-style: italic"> value\_size        </span>  5.22 KB*                                                                                                               \
*<span style="font-style: italic"> value\_status      </span>  <span style="font-style: italic">-- set --</span>*                                                                                                             \
\**\
*</pre><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #008000; text-decoration-color: #008000; font-weight: bold">query.table</span>*\
*├── input: <span style="color: #008000; text-decoration-color: #008000; font-style: italic">query (string)</span> = 0a66077d-b9c7-4a0a-ba81-f60a52055d50*\
*├── input: <span style="color: #008000; text-decoration-color: #008000; font-style: italic">relation\_name (string)</span> = 593fc9c4-3dfe-4e5b-a017-daf01c05b9ba*\
*└── input: <span style="color: #008000; text-decoration-color: #008000; font-style: italic">table (table)</span> = e324894f-c4ec-4caa-9e27-6f1463437ed3*\
*└── <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">query.table</span>*\
*├── input: <span style="color: #000080; text-decoration-color: #000080; font-style: italic">query (string)</span> = 851bd6c3-c3dd-4506-b316-81797078a515*\
*├── input: <span style="color: #000080; text-decoration-color: #000080; font-style: italic">relation\_name (string)</span> = 32ff3626-2b42-4cfb-be67-3e8ec0f25446*\
*└── input: <span style="color: #000080; text-decoration-color: #000080; font-style: italic">table (table)</span> = 36df833f-0dbe-4683-b912-42c73df877ac*\
*└── <span style="color: #ff00ff; text-decoration-color: #ff00ff; font-weight: bold">create.table</span>*\
*├── input: <span style="color: #ff00ff; text-decoration-color: #ff00ff; font-style: italic">file (file)</span> = 737547e8-7c61-43e7-a6ee-e037c5304f96*\
*│   └── <span style="color: #870000; text-decoration-color: #870000; font-weight: bold">download.file</span>*\
*│       ├── input: <span style="color: #870000; text-decoration-color: #870000; font-style: italic">file\_name (string)</span> = 2751a86e-460e-4df8-92c3-a20f65576e3b*\
*│       └── input: <span style="color: #870000; text-decoration-color: #870000; font-style: italic">url (string)</span> = 371573ac-17a3-43ff-9073-19f249e7739e*\
*└── input: <span style="color: #ff00ff; text-decoration-color: #ff00ff; font-style: italic">first\_row\_is\_header (boolean)</span> = 53185a6d-3b24-4744-b501-1f94a5639ab6*\
*</pre><div style="text-align: right; position: relative"><style>*\
*.observable-logo {*\
*position: absolute;*\
*bottom: 0;*\
*right: 0;*\
*margin-bottom: 5px;*\
*margin-right: 1px;*\
*transition: background-color 0.2s;*\
*}*\
*.observable-logo svg {*\
*opacity: 0.5;*\
*transition: opacity 0.2s;*\
*}*\
*.observable-logo span {*\
*opacity: 0;*\
*transition: opacity 0.2s;*\
*padding-right: .2em;*\
*padding-left: .2em;*\
*}*\
*.observable-logo:hover {*\
*background-color: white;*\
*}*\
*.observable-logo:hover span {*\
*opacity: .8;*\
*}*\
*.observable-logo:hover svg {*\
*opacity: .8;*\
*}*\
*.observable-link:hover \~ iframe {*\
*outline: solid 1px #E0E0E0;*\
*box-shadow: 0 0 3px;*\
*transition: box-shadow 0.2s;*\
*}*\
*.observable-link \~ iframe {*\
*outline: none;*\
*}*\
*/* Colab-only rule - untested */\
body > .output-area > .output-body {\
margin-right: 2px;\
}\
</style><a class="observable-link" href="https://observablehq.com/@dharpa-project/kiara-data-lineage" target="_blank" style="text-decoration: none; color: inherit;">\
<div class="observable-logo" style="display: flex; align-items: center; justify-content: flex-end;">\
<span>Edit @dharpa-project/kiara-data-lineage on Observable</span>\
<svg role="img" viewBox="0 0 25 28" width="25" height="28" aria-label="Observable" fill="currentColor" class="near-black" style="width: 18px;"><path d="M12.5 22.6667C11.3458 22.6667 10.3458 22.4153 9.5 21.9127C8.65721 21.412 7.98339 20.7027 7.55521 19.8654C7.09997 18.9942 6.76672 18.0729 6.56354 17.1239C6.34796 16.0947 6.24294 15.0483 6.25 14C6.25 13.1699 6.30417 12.3764 6.41354 11.6176C6.52188 10.8598 6.72292 10.0894 7.01563 9.30748C7.30833 8.52555 7.68542 7.84763 8.14479 7.27274C8.62304 6.68378 9.24141 6.20438 9.95208 5.87163C10.6979 5.51244 11.5458 5.33333 12.5 5.33333C13.6542 5.33333 14.6542 5.58467 15.5 6.08733C16.3428 6.588 17.0166 7.29733 17.4448 8.13459C17.8969 8.99644 18.2271 9.9103 18.4365 10.8761C18.6448 11.841 18.75 12.883 18.75 14C18.75 14.8301 18.6958 15.6236 18.5865 16.3824C18.4699 17.1702 18.2639 17.9446 17.9719 18.6925C17.6698 19.4744 17.2948 20.1524 16.8427 20.7273C16.3906 21.3021 15.7927 21.7692 15.0479 22.1284C14.3031 22.4876 13.4542 22.6667 12.5 22.6667ZM14.7063 16.2945C15.304 15.6944 15.6365 14.864 15.625 14C15.625 13.1073 15.326 12.3425 14.7292 11.7055C14.1313 11.0685 13.3885 10.75 12.5 10.75C11.6115 10.75 10.8688 11.0685 10.2708 11.7055C9.68532 12.3123 9.36198 13.1405 9.375 14C9.375 14.8927 9.67396 15.6575 10.2708 16.2945C10.8688 16.9315 11.6115 17.25 12.5 17.25C13.3885 17.25 14.124 16.9315 14.7063 16.2945ZM12.5 27C19.4031 27 25 21.1792 25 14C25 6.82075 19.4031 1 12.5 1C5.59687 1 0 6.82075 0 14C0 21.1792 5.59687 27 12.5 27Z" fill="currentColor"></path></svg></div>\
</a></div>\
<script>\
var ObservableJupyterWrapper = (function (exports) {\
'use strict';</script>\
<script>\
iframeSrc = `<!DOCTYPE html>\ <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@3/dist/inspector.css">\ <style>\ body {\   margin: 0;\ }\ </style>\ OPENSCRIPT\ var ObservableJupyterIframe = (function (exports) {\   'use strict';<div style="overflow: auto;"></div>\ <script type="module">\ const inputs = {"dataset": {"0": {"id": "value:008e4800-677d-4f10-a94f-a47a5822b1a0", "desc": {"data_type": "table", "label": "[this value]", "node_type": "value", "data_type_config": {}, "level": 1}, "parentIds": ["module:zdpuAujFQQA4wC2wWEFJAYijQndtnGmD6iEwsjm3xuDf3Bcmo"], "info": {"preview": "Id\\tLabel\\tJournalType\\tCity\\tCountryNetworkTime\\tPresentDayCountry\\tLatitude\\tLongitude\\tLanguage\\t\\n296\\tDie deutsche Klinik am Eingange des zwanzigsten Jahrhunderts\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n10\\tBerliner klinische Wochenschrift\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n13\\tCharit\\u00e9 Annalen\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n50\\tRussische medicinische Rundschau\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n76\\tDeutsche Aerzte-Zeitung\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n113\\tZeitschrift f\\u00fcr klinische Medicin\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n192\\t\\u00c4rztliche Sachverst\\u00e4ndigen-Zeitung\\tgeneral medicine\\tBerlin\\tGerman Empire\\tGermany\\t52.52\\t13.405\\tGerman\\t\\n"}}, "1": {"id": "module:zdpuAujFQQA4wC2wWEFJAYijQndtnGmD6iEwsjm3xuDf3Bcmo", "desc": {"module_type": "query.table", "module_config": {"constants": {}, "defaults": {}, "query": null, "relation_name": "data"}, "label": "query.table", "node_type": "operation", "level": 3}, "parentIds": ["value:0a66077d-b9c7-4a0a-ba81-f60a52055d50", "value:593fc9c4-3dfe-4e5b-a017-daf01c05b9ba", "module:zdpuAtoZQvK1nLugx2cAb75ho8jjQ42UozccgsSx9EzkhRp5Y"], "info": {"type_name": "query.table", "documentation": {"description": "Execute a sql query against an (Arrow) table.", "doc": "The default relation name for the sql query is 'data', but can be modified by the 'relation_name' config option/input.\\n\\nIf the 'query' module config option is not set, users can provide their own query, otherwise the pre-set\\none will be used."}, "authors": {"authors": [{"name": "Markus Binsteiner", "email": "markus@frkl.io"}]}, "context": {"references": {"source_repo": {"url": "https://github.com/DHARPA-Project/kiara_plugin.tabular", "desc": "The module package git repository."}, "documentation": {"url": "https://DHARPA-Project.github.io/kiara_plugin.tabular/", "desc": "The url for the module package documentation."}}, "tags": ["tabular"], "labels": {"package": "kiara_plugin.tabular"}}, "python_class": {"python_class_name": "QueryTableSQL", "python_module_name": "kiara_plugin.tabular.modules.table", "full_name": "kiara_plugin.tabular.modules.table.QueryTableSQL"}, "module_src": "class QueryTableSQL(KiaraModule):\\n    \\"\\"\\"Execute a sql query against an (Arrow) table.\\n\\n    The default relation name for the sql query is 'data', but can be modified by the 'relation_name' config option/input.\\n\\n    If the 'query' module config option is not set, users can provide their own query, otherwise the pre-set\\n    one will be used.\\n    \\"\\"\\"\\n\\n    _module_type_name = \\"query.table\\"\\n    _config_cls = QueryTableSQLModuleConfig\\n\\n    def create_inputs_schema(\\n        self,\\n    ) -> ValueMapSchema:\\n\\n        inputs = {\\n            \\"table\\": {\\n                \\"type\\": \\"table\\",\\n                \\"doc\\": \\"The table to query\\",\\n            }\\n        }\\n\\n        if self.get_config_value(\\"query\\") is None:\\n            inputs[\\"query\\"] = {\\n                \\"type\\": \\"string\\",\\n                \\"doc\\": \\"The query, use the value of the 'relation_name' input as table, e.g. 'select * from data'.\\",\\n            }\\n            inputs[\\"relation_name\\"] = {\\n                \\"type\\": \\"string\\",\\n                \\"doc\\": \\"The name the table is referred to in the sql query.\\",\\n                \\"default\\": \\"data\\",\\n            }\\n\\n        return inputs\\n\\n    def create_outputs_schema(\\n        self,\\n    ) -> ValueMapSchema:\\n\\n        return {\\"query_result\\": {\\"type\\": \\"table\\", \\"doc\\": \\"The query result.\\"}}\\n\\n    def process(self, inputs: ValueMap, outputs: ValueMap) -> None:\\n\\n        import duckdb\\n\\n        if self.get_config_value(\\"query\\") is None:\\n            _query: str = inputs.get_value_data(\\"query\\")\\n            _relation_name: str = inputs.get_value_data(\\"relation_name\\")\\n        else:\\n            _query = self.get_config_value(\\"query\\")\\n            _relation_name = self.get_config_value(\\"relation_name\\")\\n\\n        if _relation_name.upper() in RESERVED_SQL_KEYWORDS:\\n            raise KiaraProcessingException(\\n                f\\"Invalid relation name '{_relation_name}': this is a reserved sql keyword, please select a different name.\\"\\n            )\\n\\n        _table: KiaraTable = inputs.get_value_data(\\"table\\")\\n        rel_from_arrow = duckdb.arrow(_table.arrow_table)\\n        result: duckdb.DuckDBPyRelation = rel_from_arrow.query(_relation_name, _query)\\n\\n        outputs.set_value(\\"query_result\\", result.arrow())\\n", "config": {"python_class": {"python_class_name": "QueryTableSQLModuleConfig", "python_module_name": "kiara_plugin.tabular.modules.table", "full_name": "kiara_plugin.tabular.modules.table.QueryTableSQLModuleConfig"}, "config_values": {"constants": {"description": "Value constants for this module.", "type": "object", "value_default": {}, "required": false}, "defaults": {"description": "Value defaults for this module.", "type": "object", "value_default": {}, "required": false}, "query": {"description": "The query to execute. If not specified, the user will be able to provide their own.", "type": "string", "value_default": null, "required": false}, "relation_name": {"description": "The name the table is referred to in the sql query. If not specified, the user will be able to provide their own.", "type": "string", "value_default": "data", "required": false}}}}}, "2": {"id": "value:0a66077d-b9c7-4a0a-ba81-f60a52055d50", "desc": {"label": "query (string)", "node_type": "value", "data_type": "string", "data_type_config": {}, "level": 4}, "parentIds": [], "info": {"preview": "SELECT * from data where JournalType like 'general medicine'"}}, "3": {"id": "value:593fc9c4-3dfe-4e5b-a017-daf01c05b9ba", "desc": {"label": "relation_name (string)", "node_type": "value", "data_type": "string", "data_type_config": {}, "level": 4}, "parentIds": [], "info": {"preview": "data"}}, "4": {"id": "module:zdpuAtoZQvK1nLugx2cAb75ho8jjQ42UozccgsSx9EzkhRp5Y", "desc": {"module_type": "query.table", "module_config": {"constants": {}, "defaults": {}, "query": null, "relation_name": "data"}, "label": "query.table", "node_type": "operation", "level": 5}, "parentIds": ["value:851bd6c3-c3dd-4506-b316-81797078a515", "value:32ff3626-2b42-4cfb-be67-3e8ec0f25446", "module:zdpuAscvMbzvSw8A3cJdtZRZTm18TkYEq3VfdkjaQgifChXxb"], "info": {"type_name": "query.table", "documentation": {"description": "Execute a sql query against an (Arrow) table.", "doc": "The default relation name for the sql query is 'data', but can be modified by the 'relation_name' config option/input.\\n\\nIf the 'query' module config option is not set, users can provide their own query, otherwise the pre-set\\none will be used."}, "authors": {"authors": [{"name": "Markus Binsteiner", "email": "markus@frkl.io"}]}, "context": {"references": {"source_repo": {"url": "https://github.com/DHARPA-Project/kiara_plugin.tabular", "desc": "The module package git repository."}, "documentation": {"url": "https://DHARPA-Project.github.io/kiara_plugin.tabular/", "desc": "The url for the module package documentation."}}, "tags": ["tabular"], "labels": {"package": "kiara_plugin.tabular"}}, "python_class": {"python_class_name": "QueryTableSQL", "python_module_name": "kiara_plugin.tabular.modules.table", "full_name": "kiara_plugin.tabular.modules.table.QueryTableSQL"}, "module_src": "class QueryTableSQL(KiaraModule):\\n    \\"\\"\\"Execute a sql query against an (Arrow) table.\\n\\n    The default relation name for the sql query is 'data', but can be modified by the 'relation_name' config option/input.\\n\\n    If the 'query' module config option is not set, users can provide their own query, otherwise the pre-set\\n    one will be used.\\n    \\"\\"\\"\\n\\n    _module_type_name = \\"query.table\\"\\n    _config_cls = QueryTableSQLModuleConfig\\n\\n    def create_inputs_schema(\\n        self,\\n    ) -> ValueMapSchema:\\n\\n        inputs = {\\n            \\"table\\": {\\n                \\"type\\": \\"table\\",\\n                \\"doc\\": \\"The table to query\\",\\n            }\\n        }\\n\\n        if self.get_config_value(\\"query\\") is None:\\n            inputs[\\"query\\"] = {\\n                \\"type\\": \\"string\\",\\n                \\"doc\\": \\"The query, use the value of the 'relation_name' input as table, e.g. 'select * from data'.\\",\\n            }\\n            inputs[\\"relation_name\\"] = {\\n                \\"type\\": \\"string\\",\\n                \\"doc\\": \\"The name the table is referred to in the sql query.\\",\\n                \\"default\\": \\"data\\",\\n            }\\n\\n        return inputs\\n\\n    def create_outputs_schema(\\n        self,\\n    ) -> ValueMapSchema:\\n\\n        return {\\"query_result\\": {\\"type\\": \\"table\\", \\"doc\\": \\"The query result.\\"}}\\n\\n    def process(self, inputs: ValueMap, outputs: ValueMap) -> None:\\n\\n        import duckdb\\n\\n        if self.get_config_value(\\"query\\") is None:\\n            _query: str = inputs.get_value_data(\\"query\\")\\n            _relation_name: str = inputs.get_value_data(\\"relation_name\\")\\n        else:\\n            _query = self.get_config_value(\\"query\\")\\n            _relation_name = self.get_config_value(\\"relation_name\\")\\n\\n        if _relation_name.upper() in RESERVED_SQL_KEYWORDS:\\n            raise KiaraProcessingException(\\n                f\\"Invalid relation name '{_relation_name}': this is a reserved sql keyword, please select a different name.\\"\\n            )\\n\\n        _table: KiaraTable = inputs.get_value_data(\\"table\\")\\n        rel_from_arrow = duckdb.arrow(_table.arrow_table)\\n        result: duckdb.DuckDBPyRelation = rel_from_arrow.query(_relation_name, _query)\\n\\n        outputs.set_value(\\"query_result\\", result.arrow())\\n", "config": {"python_class": {"python_class_name": "QueryTableSQLModuleConfig", "python_module_name": "kiara_plugin.tabular.modules.table", "full_name": "kiara_plugin.tabular.modules.table.QueryTableSQLModuleConfig"}, "config_values": {"constants": {"description": "Value constants for this module.", "type": "object", "value_default": {}, "required": false}, "defaults": {"description": "Value defaults for this module.", "type": "object", "value_default": {}, "required": false}, "query": {"description": "The query to execute. If not specified, the user will be able to provide their own.", "type": "string", "value_default": null, "required": false}, "relation_name": {"description": "The name the table is referred to in the sql query. If not specified, the user will be able to provide their own.", "type": "string", "value_default": "data", "required": false}}}}}, "5": {"id": "value:851bd6c3-c3dd-4506-b316-81797078a515", "desc": {"label": "query (string)", "node_type": "value", "data_type": "string", "data_type_config": {}, "level": 6}, "parentIds": [], "info": {"preview": "SELECT * from data where City like 'Berlin'"}}, "6": {"id": "value:32ff3626-2b42-4cfb-be67-3e8ec0f25446", "desc": {"label": "relation_name (string)", "node_type": "value", "data_type": "string", "data_type_config": {}, "level": 6}, "parentIds": [], "info": {"preview": "data"}}, "7": {"id": "module:zdpuAscvMbzvSw8A3cJdtZRZTm18TkYEq3VfdkjaQgifChXxb", "desc": {"module_type": "create.table", "module_config": {"constants": {}, "defaults": {}, "source_type": "file", "target_type": "table", "ignore_errors": false}, "label": "create.table", "node_type": "operation", "level": 7}, "parentIds": ["module:zdpuAym429C1qnbnbj5GUARHcVL9jUxa6n53A7dpjGRy47g9W", "value:53185a6d-3b24-4744-b501-1f94a5639ab6"], "info": {"type_name": "create.table", "documentation": {"description": "-- n/a --", "doc": null}, "authors": {"authors": [{"name": "Markus Binsteiner", "email": "markus@frkl.io"}]}, "context": {"references": {"source_repo": {"url": "https://github.com/DHARPA-Project/kiara_plugin.tabular", "desc": "The module package git repository."}, "documentation": {"url": "https://DHARPA-Project.github.io/kiara_plugin.tabular/", "desc": "The url for the module package documentation."}}, "tags": ["tabular"], "labels": {"package": "kiara_plugin.tabular"}}, "python_class": {"python_class_name": "CreateTableModule", "python_module_name": "kiara_plugin.tabular.modules.table", "full_name": "kiara_plugin.tabular.modules.table.CreateTableModule"}, "module_src": "class CreateTableModule(CreateFromModule):\\n\\n    _module_type_name = \\"create.table\\"\\n    _config_cls = CreateTableModuleConfig\\n\\n    def create_optional_inputs(\\n        self, source_type: str, target_type\\n    ) -> Union[Mapping[str, Mapping[str, Any]], None]:\\n\\n        if source_type == \\"file\\":\\n            return {\\n                \\"first_row_is_header\\": {\\n                    \\"type\\": \\"boolean\\",\\n                    \\"optional\\": True,\\n                    \\"doc\\": \\"Whether the first row of the file is a header row. If not provided, kiara will try to auto-determine.\\",\\n                }\\n            }\\n\\n        return None\\n\\n    def create__table__from__file(self, source_value: Value, optional: ValueMap) -> Any:\\n        \\"\\"\\"Create a table from a file, trying to auto-determine the format of said file.\\"\\"\\"\\n\\n        import csv as py_csv\\n\\n        from pyarrow import csv\\n\\n        input_file: FileModel = source_value.data\\n        imported_data = None\\n        errors = []\\n\\n        has_header = optional.get_value_data(\\"first_row_is_header\\")\\n        if has_header is None:\\n            try:\\n                has_header = True\\n                with open(input_file.path, \\"rt\\") as csvfile:\\n                    sniffer = py_csv.Sniffer()\\n                    has_header = sniffer.has_header(csvfile.read(2048))\\n                    csvfile.seek(0)\\n            except Exception as e:\\n                # TODO: add this to the procss log\\n                log_message(\\n                    \\"csv_sniffer.error\\",\\n                    file=input_file.path,\\n                    error=str(e),\\n                    details=\\"assuming csv file has header\\",\\n                )\\n\\n        try:\\n            if has_header:\\n                imported_data = csv.read_csv(input_file.path)\\n            else:\\n                read_options = csv.ReadOptions(autogenerate_column_names=True)\\n                imported_data = csv.read_csv(input_file.path, read_options=read_options)\\n        except Exception as e:\\n            errors.append(e)\\n\\n        if imported_data is None:\\n            raise KiaraProcessingException(\\n                f\\"Failed to import file '{input_file.path}'.\\"\\n            )\\n\\n        # import pandas as pd\\n        # df = pd.read_csv(input_file.path)\\n        # imported_data = pa.Table.from_pandas(df)\\n\\n        return KiaraTable.create_table(imported_data)\\n\\n    # def create__table__from__csv_file(self, source_value: Value) -> Any:\\n    #     \\"\\"\\"Create a table from a csv_file value.\\"\\"\\"\\n    #\\n    #     from pyarrow import csv\\n    #\\n    #     input_file: FileModel = source_value.data\\n    #     imported_data = csv.read_csv(input_file.path)\\n    #\\n    #     # import pandas as pd\\n    #     # df = pd.read_csv(input_file.path)\\n    #     # imported_data = pa.Table.from_pandas(df)\\n    #\\n    #     return KiaraTable.create_table(imported_data)\\n\\n    def create__table__from__file_bundle(self, source_value: Value) -> Any:\\n        \\"\\"\\"Create a table value from a text file_bundle.\\n\\n        The resulting table will have (at a minimum) the following collumns:\\n        - id: an auto-assigned index\\n        - rel_path: the relative path of the file (from the provided base path)\\n        - content: the text file content\\n        \\"\\"\\"\\n\\n        import pyarrow as pa\\n\\n        bundle: FileBundle = source_value.data\\n\\n        columns = FILE_BUNDLE_IMPORT_AVAILABLE_COLUMNS\\n\\n        ignore_errors = self.get_config_value(\\"ignore_errors\\")\\n        file_dict = bundle.read_text_file_contents(ignore_errors=ignore_errors)\\n\\n        # TODO: use chunks to save on memory\\n        tabular: Dict[str, List[Any]] = {}\\n        for column in columns:\\n            for index, rel_path in enumerate(sorted(file_dict.keys())):\\n\\n                if column == \\"content\\":\\n                    _value: Any = file_dict[rel_path]\\n                elif column == \\"id\\":\\n                    _value = index\\n                elif column == \\"rel_path\\":\\n                    _value = rel_path\\n                else:\\n                    file_model = bundle.included_files[rel_path]\\n                    _value = getattr(file_model, column)\\n\\n                tabular.setdefault(column, []).append(_value)\\n\\n        table = pa.Table.from_pydict(tabular)\\n        return KiaraTable.create_table(table)\\n", "config": {"python_class": {"python_class_name": "CreateTableModuleConfig", "python_module_name": "kiara_plugin.tabular.modules.table", "full_name": "kiara_plugin.tabular.modules.table.CreateTableModuleConfig"}, "config_values": {"constants": {"description": "Value constants for this module.", "type": "object", "value_default": {}, "required": false}, "defaults": {"description": "Value defaults for this module.", "type": "object", "value_default": {}, "required": false}, "source_type": {"description": "The value type of the source value.", "type": "string", "value_default": null, "required": true}, "target_type": {"description": "The value type of the target.", "type": "string", "value_default": null, "required": true}, "ignore_errors": {"description": "Whether to ignore convert errors and omit the failed items.", "type": "boolean", "value_default": false, "required": false}}}}}, "8": {"id": "module:zdpuAym429C1qnbnbj5GUARHcVL9jUxa6n53A7dpjGRy47g9W", "desc": {"module_type": "download.file", "module_config": {"constants": {}, "defaults": {}, "download_metadata": true}, "label": "download.file", "node_type": "operation", "level": 9}, "parentIds": ["value:2751a86e-460e-4df8-92c3-a20f65576e3b", "value:371573ac-17a3-43ff-9073-19f249e7739e"], "info": {"type_name": "download.file", "documentation": {"description": "Download a single file from a remote location.", "doc": "The result of this operation is a single value of type 'file' (basically an array of raw bytes), which can then be used in other modules to\\ncreate more meaningful data structures."}, "authors": {"authors": [{"name": "Markus Binsteiner", "email": "markus@frkl.io"}]}, "context": {"references": {"source_repo": {"url": "https://github.com/DHARPA-Project/kiara_plugin.onboarding", "desc": "The module package git repository."}, "documentation": {"url": "https://DHARPA-Project.github.io/kiara_plugin.onboarding/", "desc": "The url for the module package documentation."}}, "tags": ["onboarding"], "labels": {"package": "kiara_plugin.onboarding"}}, "python_class": {"python_class_name": "DownloadFileModule", "python_module_name": "kiara_plugin.onboarding.modules.files", "full_name": "kiara_plugin.onboarding.modules.files.DownloadFileModule"}, "module_src": "class DownloadFileModule(KiaraModule):\\n    \\"\\"\\"Download a single file from a remote location.\\n\\n    The result of this operation is a single value of type 'file' (basically an array of raw bytes), which can then be used in other modules to\\n    create more meaningful data structures.\\n    \\"\\"\\"\\n\\n    _module_type_name = \\"download.file\\"\\n    _config_cls = DownloadFileConfig\\n\\n    def create_inputs_schema(self) -> ValueMapSchema:\\n\\n        result: Dict[str, Dict[str, Any]] = {\\n            \\"url\\": {\\"type\\": \\"string\\", \\"doc\\": \\"The url of the file to download.\\"},\\n            \\"file_name\\": {\\n                \\"type\\": \\"string\\",\\n                \\"doc\\": \\"The file name to use for the downloaded file.\\",\\n                \\"optional\\": True,\\n            },\\n        }\\n        return result\\n\\n    def create_outputs_schema(\\n        self,\\n    ) -> ValueMapSchema:\\n\\n        result: Dict[str, Dict[str, Any]] = {\\n            \\"file\\": {\\n                \\"type\\": \\"file\\",\\n                \\"doc\\": \\"The downloaded file.\\",\\n            }\\n        }\\n\\n        if self.get_config_value(\\"download_metadata\\"):\\n            result[\\"download_metadata\\"] = {\\n                \\"type\\": \\"dict\\",\\n                \\"doc\\": \\"Metadata about the download.\\",\\n            }\\n        return result\\n\\n    def process(self, inputs: ValueMap, outputs: ValueMap):\\n\\n        url = inputs.get_value_data(\\"url\\")\\n        file_name = inputs.get_value_data(\\"file_name\\")\\n\\n        result_file, metadata = download_file(url=url, file_name=file_name)\\n\\n        outputs.set_value(\\"download_metadata\\", metadata)\\n        outputs.set_value(\\"file\\", result_file)\\n", "config": {"python_class": {"python_class_name": "DownloadFileConfig", "python_module_name": "kiara_plugin.onboarding.modules.files", "full_name": "kiara_plugin.onboarding.modules.files.DownloadFileConfig"}, "config_values": {"constants": {"description": "Value constants for this module.", "type": "object", "value_default": {}, "required": false}, "defaults": {"description": "Value defaults for this module.", "type": "object", "value_default": {}, "required": false}, "download_metadata": {"description": "Whether to return the download metadata as well.", "type": "boolean", "value_default": true, "required": false}}}}}, "9": {"id": "value:2751a86e-460e-4df8-92c3-a20f65576e3b", "desc": {"label": "file_name (string)", "node_type": "value", "data_type": "string", "data_type_config": {}, "level": 10}, "parentIds": [], "info": {"preview": "JournalNodes1902.csv"}}, "10": {"id": "value:371573ac-17a3-43ff-9073-19f249e7739e", "desc": {"label": "url (string)", "node_type": "value", "data_type": "string", "data_type_config": {}, "level": 10}, "parentIds": [], "info": {"preview": "https://raw.githubusercontent.com/DHARPA-Project/kiara.examples/main/examples/data/network_analysis/journals/JournalNodes1902.csv"}}, "11": {"id": "value:53185a6d-3b24-4744-b501-1f94a5639ab6", "desc": {"label": "first_row_is_header (boolean)", "node_type": "value", "data_type": "boolean", "data_type_config": {}, "level": 8}, "parentIds": [], "info": {"preview": "True"}}}};\ const slug = '@dharpa-project/kiara-data-lineage';\ const into = document.getElementsByTagName('div')[0];\ const cells = ['displayViz', 'style']\ ObservableJupyterIframe.embed(slug, into, cells, inputs).then(m => {window.main = m;});\ ObservableJupyterIframe.monitor()\ window.addEventListener('unload', () => {\   if (typeof window.main !== 'undefined') {\       window.main._runtime.dispose();\   }\ });\ CLOSESCRIPT\`.replace(/OPENSCRIPT/gi, '<sc' + 'ript>').replace(/CLOSESCRIPT/gi, '</sc' + 'ript>')\
document.getElementById('observable-embed-div-13255868146737226').srcdoc = iframeSrc;\
ObservableJupyterWrapper.listenToSize(document.getElementById('observable-embed-div-13255868146737226'));\
</script><h2>What next...?</h2>
